jQuery(document).ready(function($){var doRevisionAction,stopEvent,$table=$("form#entry_form");$table.on("change",".toggle-all-revisions",function(){($(this).is(":checked")?$(".diff-deletedline input[type='radio']",$table):$(".diff-addedline input[type='radio']",$table)).trigger("click")}).on("change",function(e){var button_text=gvRevisions.restore.plural;1===$(".diff-deletedline .revision_checkbox:checked",$table).length&&(button_text=gvRevisions.restore.singular),0<$(".diff-deletedline input[type='radio']",$table).filter(":checked").length?$(".button-primary",$table).prop("value",button_text).fadeIn(150):$(".button-primary",$table).fadeOut(150,function(){$(this).prop("value",button_text)}),$(".toggle-all-revisions").prop("checked",0===$(".diff-deletedline input[type='radio']",$table).not(":checked").length)}).on("submit",function(e){return confirm(gvRevisions.confirm)}).on("click","td",function(e){$(e.target).is("td")&&$('input[type="radio"]',e.target).click()}).on("click",'input[type="radio"]',function(){$(this).prop("checked",!0),$(this).parents("tr").find('input[type="radio"]').each(function(){$(this).parents("td").toggleClass("diff-enabled",this.checked)})}),$(".toggle-all-revisions",$table).first().trigger("change");$("#tab_form-revisions").length&&(doRevisionAction=function(data,callback=null){var $loader=$('<span class="gform-loader gform-loader--simple"></span>');$("#notification_list_form").find(".top").after($loader),$.post(ajaxurl,data,function(result){callback&&callback(result),setTimeout(function(){$loader.remove();var type=result.success?"info":"error";!function(text,type){$("#gv-notice").remove();var $notice=$('<div id="gv-notice" class="notice notice-'+type+' gv-notice" style="display: none"></div>');$("#gf-admin-notices-wrapper").append($notice.html(text)),$notice.fadeIn(),setTimeout(function(){$notice.fadeOut(function(){$notice.remove()})},6e3)}(result.data,type)},600)})},stopEvent=function(e){e.preventDefault(),e.stopPropagation()},$(".gv-form-revision-restore").click(function(e){stopEvent(e),confirm(gvRevisions.confirmRestore)&&doRevisionAction({action:"gv_restore_revision",id:$(this).data("id"),form_id:$(this).data("form-id"),nonce:$(this).data("nonce")})}),$(".gv-form-revision-delete").click(function(e){stopEvent(e);var $el=$(this);confirm(gvRevisions.confirmDelete)&&doRevisionAction({action:"gv_delete_revision",id:$el.data("id"),nonce:$el.data("nonce")},function(result){var $row;result.success&&($row=$el.closest("tr")).fadeOut(function(){$row.remove()})})}),$("#doaction").click(function(e){stopEvent(e);var $el=$(this),$checked=$(this).closest("form").find('input[name="revisions[]"]:checked'),e=$checked.map(function(){return this.value}).get();if(e.length&&"delete"===$("#bulk-action-selector-top").val()){let confirmText=gvRevisions.confirmDelete;if(1<e.length&&(confirmText=gvRevisions.confirmDeletes),!confirm(confirmText))return!1;$el.attr("disabled","disabled"),doRevisionAction({action:"gv_delete_revisions",ids:e,nonce:$("#gform_form_revision_list_action").val()},function(result){$el.removeAttr("disabled"),result.success&&(($rows=$checked.closest("tr")).fadeOut(function(){$rows.remove()}),$("#cb-select-all-1,#cb-select-all-2").prop("checked",!1))})}}))});