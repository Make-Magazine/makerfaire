!function(V){function h(e,t,i){var r=V("#gform_"+e),n=V.makeArray(r.prop("elements")),o="^[a-z]*_"+e+"_"+t;i&&(o+="_"+i),o+="$";for(var a=new RegExp(o,"gi"),l=null,s=0;s<n.length;s++){var c=n[s].id;if(c)if(a.test(c)){l=n[s];break}}return!!l&&(/^(?:checkbox|radio)$/i.test(l.type)?l.checked:!!l.value)}String.prototype.gformFormat||(String.prototype.gformFormat=function(){var i=arguments;return this.replace(/{(\d+)}/g,function(e,t){return void 0!==i[t]?i[t]:e})}),window.gwCopyObj=function(e){var L=this;for(prop in e)e.hasOwnProperty(prop)&&(L[prop]=e[prop]);function C(e){return parseInt(e)!=e}function g(e){if(!(e instanceof Object))return e;var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push(e[i]);return t}L.init=function(){gform.addFilter("gpcc_copied_value",function(e,t,i){if(V("#input_{0}_{1}".gformFormat(L.formId,i.source)).hasClass("ginput_total")||t.hasClass("ginput_quantity")){var r=gf_get_field_number_format(i.source,L.formId);r||(r=gf_get_field_number_format(i.target,L.formId));var n=gformGetDecimalSeparator(r);e=gformCleanNumber(e,"","",n)}return e});var e=V("#gform_wrapper_{0}".gformFormat(L.formId));e.off("click.gpcopycat"),e.on("click.gpcopycat",'.gwcopy input[type="checkbox"]',function(){V(this).is(":checked")?L.copyValues(this):L.clearValues(this)}),e.off("change.gpcopycat"),e.on("change.gpcopycat",".gwcopy input:not(:checkbox), .gwcopy textarea, .gwcopy select",function(){L.copyValues(this)}),e.find(".gwcopy:not(.gfield--type-list)").find("input, textarea, select, button").each(function(){if(V(this).is(":checkbox, :radio")||V(this).parents(".gfield_chainedselect").length?V(this).is(":checked")&&L.copyValues(this,L.overwriteOnInit):L.copyValues(this,L.overwriteOnInit),V(this).is("button")){if(!V(this)[0].id.includes("_select_all"))return;var r=V(this).attr("data-label-select"),e=V(this).attr("data-label-deselect");V(this)[0].onclick=null,V(this).on("click",function(){var i=V(this).text();V(this).siblings().each(function(e,t){i==r?V(t).find("input").prop("checked")||V(t).find("input").click():V(t).find("input").prop("checked")&&V(t).find("input").click()}),i==r?V(this).text(e):V(this).text(r)})}}),e.find(".gfield--type-list.gwcopy").find("input").first().each(function(){L.copyValues(this,L.overwriteOnInit)}),gform.addAction("gform_list_post_item_delete",function(e){0<e.parents(".gwcopy").length&&(L.clearValues(e),L.copyValues(e))});var p=[];gform.addAction("gform_input_change",function(){p=[]},15),gform.addAction("gform_post_conditional_logic_field_action",function(e,t,i,r,n){if("hide"!==t){var o=gf_get_input_id_by_html_id(i),a=L.getFieldSettings(o);if(a)for(var l=0;l<a.length;l++)if(-1===V.inArray(a[l].trigger,p)){p.push(a[l].trigger);var s=V("#field_{0}_{1}".gformFormat(e,a[l].trigger)).find("input, textarea, select"),c=!n;s.is(":checkbox")?s.filter(":checked").length&&L.copyValues(s[0],c):L.copyValues(s[0],c)}}}),e.data("GPCopyCat",L)},L.getFieldSettings=function(e){return void 0!==L.fields[e]?L.fields[e]:!1!==L.getSourceFieldIdByTarget(e,!0)?L.getSourceFieldIdByTarget(e,!0):!1!==L.getSourceField(e,!0)?L.getSourceField(e,!0):[]},L.copyValues=function(m,y,F){var e=gf_get_input_id_by_html_id(V(m).parents(".gfield").attr("id")),t=L.getFieldSettings(e);y=void 0!==y?y:L.overwrite,F=void 0!==F?F:y;for(var i=0,r=t.length;i<r;i++){var I=t[i],n=I.source,k=I.target,o=I.condition,a=I.conditionFormId,l=L.getFieldGroup(I,"source"),w=L.getFieldGroup(I,"target"),x=L.isListField(l)&&L.isListField(w),b=L.getGroupValues(l,"source",{sort:!(x||!L.isListField(w))&&L.getGroupValues(w,"target",{isListToList:x,sourceInputId:k}),isListToList:x,sourceInputId:n,targetInputId:k});if(o){var s=o.split(".");if(!h(a,e=s[0],s[1]))continue}if(!window.gform.applyFilters("gpcc_custom_copy",!1,m.id,l,w,I.source))if(l.parents(".gfield_chainedselect").length)l.each(function(e,t){if(t.name.split("_").pop()===I.source){var i=w.get(e);i.value=t.value,V(i).trigger("change")}});else{if(L.isListField(w)){if(!y)return;var c=w.parents(".ginput_list").find(".gfield_list_group").length,p=L.isListField(l)?l.parents(".ginput_list").find(".gfield_list_group").length:l.length,d=Math.floor(p-c),u=L.getMaxRowCount(w);if(d<0&&1<c)w.each(function(){var e=g(b);-1===V.inArray(V(this).val(),e)&&1<V(this).parents(".gfield_list").find(".gfield_list_group").length&&gformDeleteListItem(V(this),u)});else if(0<d)for(var f=0;f<d&&!(0<u&&u<c+f+1);f++)gformAddListItem(w[w.length-1],L.getMaxRowCount(w));w=L.getFieldGroup(I,"target")}targetValues=[],!C(k)&&w.is(":checkbox")&&y&&w.prop("checked",!1),w.each(function(e){var t=V(this),i=t.is(":checkbox, :radio"),r=x?L.getListInputIndex(t):e,n=i||b[r]||V.isArray(b)&&b.join(" "),o=!1,a=null;if(targetValues[e]=t.val(),o=i?w.is(":checked"):t.val(),!y&&o&&(!V(m).is("select")||!t.is("select")))return!0;if(!n&&!F)return!0;if(L.isListField(w))a=C(k)?b[e]:b[r],a=gform.applyFilters("gppc_copied_value",a,t,I,b),a=gform.applyFilters("gpcc_copied_value",a,t,I,b),t.val(a);else if(i)-1!=V.inArray(t.val(),gform.applyFilters("gpcc_copied_value",b,t,I,b))&&(t.prop("checked",!0),t.trigger("change"),t.parents(".gfield_price").length&&gformCalculateTotalPrice(L.formId));else if(1<w.length)a=gform.applyFilters("gppc_copied_value",b[r],t,I,b),a=gform.applyFilters("gpcc_copied_value",a,t,I,b),t.val(a);else if(b=b.filter(function(e,t){return""!=e}),a=gform.applyFilters("gppc_copied_value",L.cleanValueByInputType(b.join(" "),t.attr("type")),t,I,b),a=gform.applyFilters("gpcc_copied_value",a,t,I,b),0<t.parents(".gfield_price:not(.gfield_quantity)").length&&t.is('select, input[type="radio"], input[type="checkbox"]')&&-1===a.indexOf("|"))t.val(t.find('option[value^="'+a+'|"]').attr("value"));else if(t.is("select")&&0===t.find('option[value="'+a+'"]').length&&(a=t.find("option:first").val()),t.val(a),window.tinyMCE){var l=tinyMCE.get(t.attr("id"));l&&l.setContent(a)}if(V(t.parent()[0]).hasClass("iti--separate-dial-code")){var s,c=t[0].id.replace("input",""),p="gp_advanced_phone_field"+c,d=c.split("_").pop(),u=L.getSourceFieldIdByTarget(d,!1),f="_"+L.formId+"_"+u,g="#field"+f,h="gp_advanced_phone_field"+f;s=void 0!==window[h]?window[h].getFormattedNumber():V(g).find(":input")[0].value,window[p].iti.setNumber(s)}if(V(t[0]).hasClass("has-inline-datepicker")){var _=t[0].id.split("_").pop(),v=L.formId;V("#datepicker_"+v+"_"+_).datepicker("setDate",a)}a?t.addClass("gpcc-populated-input").parents(".gfield").addClass("gpcc-populated"):t.removeClass("gpcc-populated-input").parents(".gfield").removeClass("gpcc-populated")}),w.is(":checkbox, :radio")?(y||w.filter(":checked"),w.keypress()):w.each(function(e){targetValues[e]!=V(this).val()&&V(this).change().trigger("chosen:updated")}),w.trigger("copy.gpcopycat")}}},L.clearValues=function(e){for(var t=V(e).parents(".gfield").attr("id").replace("field_"+L.formId+"_",""),i=L.getFieldSettings(t),r=0;r<i.length;r++){var l=i[r],s=[],c=L.getFieldGroup(l,"target"),n=L.getFieldGroup(l,"source"),o=L.isListField(c)&&L.isListField(n);if(!window.gform.applyFilters("gpcc_custom_clear",!1,e.id,n,c,l.source)&&!o)if(parseInt(l.source)==t&&V(e).is(":checkbox"))L.overwrite&&c.prop("checked",!1),L.copyValues(e,!0,!0);else if(n.each(function(e){s[e]=V(this).val()}),c.each(function(e){var t=V(this),i=t.val(),r=t.is(":checkbox, :radio"),n=t.is(":checkbox"),o=s[e];if(1==c.length&&(o=(s=s.filter(function(e,t){return""!=e})).join(" ")),o=L.cleanValueByInputType(o),o=gform.applyFilters("gppc_copied_value",o,t,l,s),o=gform.applyFilters("gpcc_copied_value",o,t,l,s),n&&t.is(":checked")?t.prop("checked",-1!==V.inArray(i,s)).change():r&&t.is(":checked")?t.prop("checked",!1).change():""!==i&&i==o&&t.val("").change(),V(t.parent()[0]).hasClass("iti--separate-dial-code")){var a=t[0].id.replace("input","");window["gp_advanced_phone_field"+a].iti.setNumber("")}t.removeClass("gpcc-populated-input").parents(".gfield").removeClass("gpcc-populated")}),L.isListField(c)){var a=L.getMaxRowCount(c);c.parents(".ginput_list").find(".gfield_list_group:not(:first)").each(function(){0===V(this).find('.gfield_list_cell input[value!=""]').length&&gformDeleteListItem(V(this).find("input").eq(0),a)})}}},L.cleanValueByInputType=function(e,t){if("number"==t){var i=new Currency(gf_global.gf_currency_config);e=gformCleanNumber(e,i.symbol_right,i.symbol_left,i.decimal_separator)}return e},L.getFieldGroup=function(e,t){var i=e[t],r=parseInt(i),n=e[t+"FormId"],o=V("#field_"+n+"_"+r),a=o.find('input[name^="input"]:not( :button ), select[name^="input"], textarea[name^="input"]'),l=L.isListField(a);if("target"===t){var s=o.find(":input:first");if(gformIsHidden(s)&&"hidden"!==s.prop("type"))return V()}if(l&&(a=a.filter('[name="input_{0}[]"]'.gformFormat(r))),C(i)&&!l){var c=i.split(".")[1],p=a.filter('[id^="input_'+n+"_"+r+"_"+c+'"], input[name="input_'+i+'"]');a=p.length<=0?a.filter("#input_"+n+"_"+i):p}else C(i)&&l&&(a=a.filter(function(){var e=L.getListInputIndex(V(this));return e==L.getListInputIndex(i,e)}));return"source"==t&&1<a.length&&V(a[0]).closest(".ginput_container_password").length&&(a=a.filter("#input_"+n+"_"+i)),"source"==t&&a.is("input:radio, input:checkbox")&&(a=a.filter(":checked")),"source"==t&&a.is("select")&&a.attr("multiple")&&(a=a.find(":selected")),gform.applyFilters("gpcc_field_group",a,e,t,o)},L.getGroupValues=function(e,t,i){void 0===i&&(i={}),i=function(e,t){for(key in t)t.hasOwnProperty(key)&&void 0===e[key]&&(e[key]=t[key]);return e}(i,{sort:!1,isListToList:!1,sourceInputId:!1,targetInputId:!1});var r=[];if(e.each(function(e){var t=e;i.isListToList&&!C(i.targetInputId)&&(t=L.getListInputIndex(V(this))),r[t]=V(this).val()}),!1!==i.sort){for(var n=i.sort.filter(function(e,t){return i.sort.indexOf(e)==t&&""!=e}),o=[],a=0;a<n.length;a++){var l=r.indexOf(n[a]);-1!==l&&(o.push(r[l]),r.splice(l,1))}r=o.concat(r)}return r},L.isListField=function(e){if(void 0!==e.data("isListField"))return e.data("isListField");var t=0<e.parents(".ginput_list").length;return e.data("isListField",t),t},L.getSourceFieldIdByTarget=function(e,t){for(var i in L.fields)if(L.fields.hasOwnProperty(i))for(var r=L.fields[i],n=0;n<r.length;n++){var o=r[n];if(parseInt(o.target)===parseInt(e))return t?r:o.source}return!1},L.getSourceField=function(e,t){for(var i in L.fields)if(L.fields.hasOwnProperty(i))for(var r=L.fields[i],n=0;n<r.length;n++){var o=r[n];if(parseInt(o.source)===parseInt(e))return t?r:o.source}return!1},L.getListInputIndex=function(e,t,i){if(void 0===t?i=!1:"boolean"==typeof t?(i=t,t=!1):void 0===i&&(i=!1),"object"==typeof e)var r=e.attr("name").match(/(\d+)/)[0],n=e.parents(".gfield_list_group"),o=n.find('[name="input_{0}[]"]'.gformFormat(r)),a=e.parents(".gfield_list_container").find(".gfield_list_group"),l=o.index(e)+1,s=a.index(n)+1;else{var c=e.split("."),p=t?t.split("."):[1,1];l=c[1],s=c[2]?c[2]:p[1]}var d=l+"."+s;return i?{index:d,column:l,row:s}:d},L.getMaxRowCount=function(e){for(var t=e.parents(".gfield").attr("class").split(" "),i=0;i<t.length;i++)if(-1!==t[i].indexOf("gp-field-maxrows"))return parseInt(t[i].split("-")[3]);return 0},L.init()}}(jQuery);
//# sourceMappingURL=gp-copy-cat.js.map