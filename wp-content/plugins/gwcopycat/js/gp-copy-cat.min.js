!function(F){window.gwCopyObj=function(e){var y=this;for(prop in e)e.hasOwnProperty(prop)&&(y[prop]=e[prop]);function I(e){return parseInt(e)!=e}function w(e){if(!(e instanceof Object))return e;var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push(e[i]);return t}y.init=function(){gform.addFilter("gpcc_copied_value",function(e,t,i){if(F("#input_{0}_{1}".format(y.formId,i.source)).hasClass("ginput_total")){var r=gf_get_field_number_format(i.source,y.formId);r||(r=gf_get_field_number_format(i.target,y.formId));var n=gformGetDecimalSeparator(r);e=gformCleanNumber(e,"","",n)}return e});var e=F("#gform_wrapper_{0}".format(y.formId));e.off("click.gpcopycat"),e.on("click.gpcopycat",'.gwcopy input[type="checkbox"]',function(){F(this).is(":checked")?y.copyValues(this):y.clearValues(this)}),e.off("change.gpcopycat"),e.on("change.gpcopycat",".gwcopy input:not(:checkbox), .gwcopy textarea, .gwcopy select",function(){y.copyValues(this)}),e.find(".gwcopy").find("input, textarea, select").each(function(){F(this).is(":checkbox, :radio")||F(this).parents(".gfield_chainedselect").length?F(this).is(":checked")&&y.copyValues(this,y.overwriteOnInit):y.copyValues(this,y.overwriteOnInit)}),gform.addAction("gform_list_post_item_delete",function(e){0<e.parents(".gwcopy").length&&(y.clearValues(e),y.copyValues(e))});var g=!1;F(document).on("gform_post_conditional_logic",function(e,t,i,r){if(!r&&i&&!g){g=!0;for(var n=0,o=i.length;n<o;n++){var a=!1,s=i[n],l=y.fields[s];if(l)for(var p=0,c=l.length;p<c;p++){var u=l[p];if(parseInt(u.source)!==s&&parseInt(u.target)!==s){a=!0;break}}if(!a){var f=F("#field_{0}_{1}.gwcopy".format(t,i[n])).find("input, textarea, select");if(!f.length){var d=y.getSourceFieldIdByTarget(i[n]);d&&(f=F("#field_{0}_{1}.gwcopy".format(y.formId,d)).find("input, textarea, select"))}f.length&&!gformIsHidden(f)&&f.each(function(){F(this).is(":checkbox")&&y.clearValues(this),y.copyValues(this)})}}requestAnimationFrame(function(){g=!1})}}),e.data("GPCopyCat",y)},y.copyValues=function(r,l,p){var e=gf_get_input_id_by_html_id(F(r).parents(".gwcopy").attr("id")),t=y.fields[e];l=void 0!==l?l:y.overwrite,p=void 0!==p?p:l;for(var i=0,n=t.length;i<n;i++){var c=t[i],o=c.source,u=c.target,a=y.getFieldGroup(c,"source"),f=y.getFieldGroup(c,"target"),d=y.isListField(a)&&y.isListField(f),g=y.getGroupValues(a,"source",{sort:!(d||!y.isListField(f))&&y.getGroupValues(f,"target",{isListToList:d,sourceInputId:u}),isListToList:d,sourceInputId:o,targetInputId:u});if(!gformIsHidden(f)||f.is('[type="hidden"]'))if(!window.gform.applyFilters("gpcc_custom_copy",!1,r.id,a,f,c.source))if(a.parents(".gfield_chainedselect").length)a.each(function(e,t){if(r.id===t.id){var i=f.get(e);i.value=r.value,F(i).trigger("change")}});else{if(y.isListField(f)){var s=f.parents(".ginput_list").find(".gfield_list_group").length,h=y.isListField(a)?a.parents(".ginput_list").find(".gfield_list_group").length:a.length,_=Math.floor(h-s),v=y.getMaxRowCount(f);if(_<0&&1<s)f.each(function(){var e=w(g);-1===F.inArray(F(this).val(),e)&&1<F(this).parents(".gfield_list").find("tbody tr").length&&gformDeleteListItem(F(this),v)});else if(0<_)for(var m=0;m<_&&!(0<v&&v<s+m+1);m++)gformAddListItem(f[f.length-1],y.getMaxRowCount(f));f=y.getFieldGroup(c,"target")}f.each(function(e){var t=F(this),i=t.is(":checkbox, :radio"),r=d?y.getListInputIndex(t):e,n=i||g[r]||F.isArray(g)&&g.join(" "),o=!1,a=null;if(o=i?f.is(":checked"):t.val(),!l&&o)return!0;if(!n&&!p)return!0;if(y.isListField(f))a=I(u)?g[e]:g[r],a=gform.applyFilters("gppc_copied_value",a,t,c),a=gform.applyFilters("gpcc_copied_value",a,t,c),t.val(a);else if(i)-1!=F.inArray(t.val(),gform.applyFilters("gpcc_copied_value",g,t,c))&&(t.prop("checked",!0),t.trigger("change"),t.parents(".gfield_price").length&&gformCalculateTotalPrice(y.formId));else if(1<f.length)a=gform.applyFilters("gppc_copied_value",g[r],t,c),a=gform.applyFilters("gpcc_copied_value",a,t,c),t.val(a);else if(g=g.filter(function(e,t){return""!=e}),a=gform.applyFilters("gppc_copied_value",y.cleanValueByInputType(g.join(" "),t.attr("type")),t,c,g),a=gform.applyFilters("gpcc_copied_value",a,t,c,g),0<t.parents(".gfield_price:not(.gfield_quantity)").length&&t.is('select, input[type="radio"], input[type="checkbox"]')&&-1===a.indexOf("|"))t.val(t.find('option[value^="'+a+'|"]').attr("value"));else if(t.is("select")&&0===t.find('option[value="'+a+'"]').length&&(a=t.find("option:first").val()),t.val(a),window.tinyMCE){var s=tinyMCE.get(t.attr("id"));s&&s.setContent(a)}a?t.addClass("gpcc-populated-input").parents(".gfield").addClass("gpcc-populated"):t.removeClass("gpcc-populated-input").parents(".gfield").removeClass("gpcc-populated")}),f.is(":checkbox, :radio")?(l||f.filter(":checked"),f.keypress()):f.change().trigger("chosen:updated"),f.trigger("copy.gpcopycat")}}},y.clearValues=function(e){for(var t=F(e).parents(".gwcopy").attr("id").replace("field_"+y.formId+"_",""),i=y.fields[t],r=0;r<i.length;r++){var n=i[r],o=[],a=y.getFieldGroup(n,"target"),s=y.getFieldGroup(n,"source"),l=y.isListField(a)&&y.isListField(s);if(!window.gform.applyFilters("gpcc_custom_clear",!1,e.id,s,a,n.source)){if(l)return;if(parseInt(n.source)==t&&F(e).is(":checkbox"))return y.overwrite&&a.prop("checked",!1),void y.copyValues(e,!0,!0);if(s.each(function(e){o[e]=F(this).val()}),a.each(function(e){var t=F(this),i=t.val(),r=t.is(":checkbox, :radio");t.is(":checkbox")?t.prop("checked",-1!==F.inArray(i,o)):r?t.prop("checked",!1):i==o[e]&&t.val(""),t.removeClass("gpcc-populated-input").parents(".gfield").removeClass("gpcc-populated")}).change(),y.isListField(a)){var p=y.getMaxRowCount(a);a.parents(".ginput_list").find(".gfield_list_group:not(:first)").each(function(){0===F(this).find('.gfield_list_cell input[value!=""]').length&&gformDeleteListItem(F(this).find("input").eq(0),p)})}}}},y.cleanValueByInputType=function(e,t){return"number"==t&&(e=gformToNumber(e)),e},y.getFieldGroup=function(e,t){var i=e[t],r=parseInt(i),n=e[t+"FormId"],o=F("#field_"+n+"_"+r),a=o.find('input[name^="input"]:not( :button ), select[name^="input"], textarea[name^="input"]'),s=y.isListField(a);if(s&&(a=a.filter('[name="input_{0}[]"]'.format(r))),I(i)&&!s){var l=i.split(".")[1],p=a.filter('[id^="input_'+n+"_"+r+"_"+l+'"], input[name="input_'+i+'"]');a=p.length<=0?a.filter("#input_"+n+"_"+i):p}else I(i)&&s&&(a=a.filter(function(){var e=y.getListInputIndex(F(this));return e==y.getListInputIndex(i,e)}));return"source"==t&&1<a.length&&F(a[0]).closest(".ginput_container_password").length&&(a=a.filter("#input_"+n+"_"+i)),"source"==t&&a.is("input:radio, input:checkbox")&&(a=a.filter(":checked")),gform.applyFilters("gpcc_field_group",a,e,t,o)},y.getGroupValues=function(e,t,i){void 0===i&&(i={}),i=function(e,t){for(key in t)t.hasOwnProperty(key)&&void 0===e[key]&&(e[key]=t[key]);return e}(i,{sort:!1,isListToList:!1,sourceInputId:!1,targetInputId:!1});var r=[];if(e.each(function(e){var t=e;i.isListToList&&!I(i.targetInputId)&&(t=y.getListInputIndex(F(this))),r[t]=F(this).val()}),!1!==i.sort){for(var n=i.sort.filter(function(e,t){return i.sort.indexOf(e)==t&&""!=e}),o=[],a=0;a<n.length;a++){var s=r.indexOf(n[a]);-1!==s&&(o.push(r[s]),r.splice(s,1))}r=o.concat(r)}return r},y.isListField=function(e){if(void 0!==e.data("isListField"))return e.data("isListField");var t=0<e.parents(".ginput_list").length;return e.data("isListField",t),t},y.getSourceFieldIdByTarget=function(e){for(var t in y.fields)if(y.fields.hasOwnProperty(t))for(var i=y.fields[t],r=0;r<i.length;r++){var n=i[r];if(parseInt(n.target)===e)return n.source}return!1},y.getListInputIndex=function(e,t,i){if(void 0===t?i=!1:"boolean"==typeof t?(i=t,t=!1):void 0===i&&(i=!1),"object"==typeof e)var r=e.attr("name").match(/(\d+)/)[0],n=e.parents(".gfield_list_group"),o=n.find('[name="input_{0}[]"]'.format(r)),a=e.parents(".gfield_list_container").find(".gfield_list_group"),s=o.index(e)+1,l=a.index(n)+1;else{var p=e.split("."),c=t?t.split("."):[1,1];s=p[1],l=p[2]?p[2]:c[1]}var u=s+"."+l;return i?{index:u,column:s,row:l}:u},y.getMaxRowCount=function(e){for(var t=e.parents("li.gfield").attr("class").split(" "),i=0;i<t.length;i++)if(-1!==t[i].indexOf("gp-field-maxrows"))return parseInt(t[i].split("-")[3]);return 0},y.init()}}(jQuery);
//# sourceMappingURL=gp-copy-cat.js.map