!function(x){window.gwCopyObj=function(t){var y=this;for(prop in t)t.hasOwnProperty(prop)&&(y[prop]=t[prop]);function I(t){return parseInt(t)!=t}function m(t){if(!(t instanceof Object))return t;var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(t[i]);return e}y.init=function(){var t=x("#gform_wrapper_{0}".format(y.formId));t.on("click.gpcopycat",'.gwcopy input[type="checkbox"]',function(){x(this).is(":checked")?y.copyValues(this):y.clearValues(this)}),t.on("change.gpcopycat",".gwcopy input:not(:checkbox), .gwcopy textarea, .gwcopy select",function(){y.copyValues(this)}),t.find(".gwcopy").find("input, textarea, select").each(function(){x(this).is(":checkbox, :radio")?x(this).is(":checked")&&y.copyValues(this,y.overwriteOnInit):y.copyValues(this,y.overwriteOnInit)}),gform.addAction("gform_list_post_item_delete",function(t){0<t.parents("li.gwcopy").length&&(y.clearValues(t),y.copyValues(t))}),t.data("GPCopyCat",y)},y.copyValues=function(t,a,p){var e=gf_get_input_id_by_html_id(x(t).parents("li.gwcopy").attr("id")),i=y.fields[e];a=void 0!==a?a:y.overwrite,p=void 0!==p?p:a;for(var n=0;n<i.length;n++){var l=i[n],r=l.source,c=l.target,o=y.getFieldGroup(l,"source"),u=y.getFieldGroup(l,"target"),f=y.isListField(o)&&y.isListField(u),d=y.getGroupValues(o,"source",{sort:!(f||!y.isListField(u))&&y.getGroupValues(u,"target",{isListToList:f,sourceInputId:c}),isListToList:f,sourceInputId:r,targetInputId:c});if(y.isListField(u)){var s=u.parents(".ginput_list").find(".gfield_list_group").length,g=y.isListField(o)?o.parents(".ginput_list").find(".gfield_list_group").length:o.length,h=Math.floor(g-s),v=y.getMaxRowCount(u);if(h<0&&1<s)u.each(function(){var t=m(d);-1===x.inArray(x(this).val(),t)&&1<x(this).parents(".gfield_list").find("tbody tr").length&&gformDeleteListItem(x(this),v)});else if(0<h)for(var _=0;_<h&&!(0<v&&v<s+_+1);_++)gformAddListItem(u[u.length-1],y.getMaxRowCount(u));u=y.getFieldGroup(l,"target")}u.each(function(t){var e=x(this),i=e.is(":checkbox, :radio"),n=f?y.getListInputIndex(e):t,r=i||d[n]||x.isArray(d)&&d.join(" "),o=!1,s=null;return o=i?u.is(":checked"):e.val(),!(a||!o)||(!r&&!p||void(y.isListField(u)?(s=I(c)?d[t]:d[n],s=gform.applyFilters("gppc_copied_value",s,e,l),e.val(s)):i?-1!=x.inArray(e.val(),d)&&e.prop("checked",!0):1<u.length?(s=gform.applyFilters("gppc_copied_value",d[n],e,l),e.val(s)):(d=d.filter(function(t,e){return""!=t}),s=gform.applyFilters("gppc_copied_value",y.cleanValueByInputType(d.join(" "),e.attr("type")),e,l,d),0<e.parents(".gfield_price").length&&e.is('select, input[type="radio"], input[type="checkbox"]')&&-1===s.indexOf("|")?e.val(e.find('option[value^="'+s+'|"]').attr("value")):(e.is("select")&&0===e.find('option[value="'+s+'"]').length&&(s=e.find("option:first").val()),e.val(s)))))}),u.is(":checkbox, :radio")?(a||u.filter(":checked"),u.keypress()):u.change().trigger("chosen:updated"),u.trigger("copy.gpcopycat")}},y.clearValues=function(t){for(var e=x(t).parents("li.gwcopy").attr("id").replace("field_"+y.formId+"_",""),i=y.fields[e],n=0;n<i.length;n++){var r=i[n],o=[],s=y.getFieldGroup(r,"target"),a=y.getFieldGroup(r,"source");if(y.isListField(s)&&y.isListField(a))return;if(r.source==e&&x(t).is(":checkbox"))return y.overwrite&&s.prop("checked",!1),void y.copyValues(t,!0,!0);if(a.each(function(t){o[t]=x(this).val()}),s.each(function(t){var e=x(this),i=e.val(),n=e.is(":checkbox, :radio");e.is(":checkbox")?e.prop("checked",-1!==x.inArray(i,o)):n?e.prop("checked",!1):i==o[t]&&e.val("")}).change(),y.isListField(s)){var p=y.getMaxRowCount(s);s.parents(".ginput_list").find(".gfield_list_group:not(:first)").each(function(){0===x(this).find('.gfield_list_cell input[value!=""]').length&&gformDeleteListItem(x(this).find("input").eq(0),p)})}}},y.cleanValueByInputType=function(t,e){return"number"==e&&(t=gformToNumber(t)),t},y.getFieldGroup=function(t,e){var i=t[e],n=parseInt(i),r=t[e+"FormId"],o=x("#field_"+r+"_"+n),s=o.find('input[name^="input"]:not( :button ), select[name^="input"], textarea[name^="input"]'),a=y.isListField(s);if(a&&(s=s.filter('[name="input_{0}[]"]'.format(n))),I(i)&&!a){var p=i.split(".")[1],l=s.filter('[id^="input_'+r+"_"+n+"_"+p+'"], input[name="input_'+i+'"]');s=l.length<=0?s.filter("#input_"+r+"_"+i):l}else I(i)&&a&&(s=s.filter(function(){var t=y.getListInputIndex(x(this));return t==y.getListInputIndex(i,t)}));return"source"==e&&s.is("input:radio, input:checkbox")&&(s=s.filter(":checked")),gform.applyFilters("gpcc_field_group",s,t,e,o)},y.getGroupValues=function(t,e,i){void 0===i&&(i={}),i=function(t,e){for(key in e)e.hasOwnProperty(key)&&void 0===t[key]&&(t[key]=e[key]);return t}(i,{sort:!1,isListToList:!1,sourceInputId:!1,targetInputId:!1});var n=[];if(t.each(function(t){var e=t;i.isListToList&&!I(i.targetInputId)&&(e=y.getListInputIndex(x(this))),n[e]=x(this).val()}),!1!==i.sort){for(var r=i.sort.filter(function(t,e){return i.sort.indexOf(t)==e&&""!=t}),o=[],s=0;s<r.length;s++){var a=n.indexOf(r[s]);-1!==a&&(o.push(n[a]),n.splice(a,1))}n=o.concat(n)}return n},y.isListField=function(t){return 0<t.parents(".ginput_list").length},y.getListInputIndex=function(t,e,i){if(void 0===e?i=!1:"boolean"==typeof e?(i=e,e=!1):void 0===i&&(i=!1),"object"==typeof t)var n=t.attr("name").match(/(\d+)/)[0],r=t.parents(".gfield_list_group"),o=r.find('[name="input_{0}[]"]'.format(n)),s=t.parents(".gfield_list_container").find(".gfield_list_group"),a=o.index(t)+1,p=s.index(r)+1;else{var l=t.split("."),c=e?e.split("."):[1,1];a=l[1],p=l[2]?l[2]:c[1]}var u=a+"."+p;return i?{index:u,column:a,row:p}:u},y.getMaxRowCount=function(t){for(var e=t.parents("li.gfield").attr("class").split(" "),i=0;i<e.length;i++)if(-1!==e[i].indexOf("gp-field-maxrows"))return parseInt(e[i].split("-")[3]);return 0},y.init()}}(jQuery);
//# sourceMappingURL=gp-copy-cat.js.map