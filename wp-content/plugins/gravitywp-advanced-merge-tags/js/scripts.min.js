window.GWPAdvancedMergeTags=null;const GWPAdvancedMergeTags=[];window.GWPAdvancedMergeTags=function(){const t=GWPAdvancedMergeTags;t.init=function(){gform.addFilter("gform_merge_tag_value_pre_calculation",(function(n,e,r,s,a){if("string"==typeof e[4]&&e[4].startsWith("gwp_word_count")){const t=e[1];let r=/[^\s]+/g;r=gform.applyFilters("gravitywp_advancedmergetags_wordcount_regex",r,n,t,s,a);const i=n.match(r);let o=null===i?0:i.length;return o=gform.applyFilters("gravitywp_advancedmergetags_wordcount_result",o,i,n,t,s,a),o}if("string"==typeof e[4]&&e[4].startsWith("gwp_substring")){const r=t.parseMergetagsAtts(e[4]);return t.hasRequiredAtts(r.named,["start"])?t.substr(n,r.named.start,r.named.length):n}return n})),gform.addAction("gform_post_calculation_events",(function(t,n,e,r){if("string"==typeof t[4]&&t[4].startsWith("gwp_word_count")){const s=t[1],a=parseInt(s,10),i=jQuery("#field_"+e+"_"+a).find('textarea[name="input_'+s+'"]');i&&jQuery(i).keydown((function(){r.bindCalcEvent(s,n,e)})).change((function(){r.bindCalcEvent(s,n,e,0)})),jQuery(document).on("tinymce-editor-init",(function(){if(tinymce){const t=tinymce.get("input_"+e+"_"+a);t&&t.on("keyup change",(function(){r.bindCalcEvent(s,n,e,0)}))}}))}}))},t.parseMergetagsAtts=function(t){const n={},e=[],r=/([\w-]+)\s*=\s*"([^"]*)"(?:\s|$)|([\w-]+)\s*=\s*'([^']*)'(?:\s|$)|([\w-]+)\s*=\s*([^\s'"]+)(?:\s|$)|"([^"]*)"(?:\s|$)|'([^']*)'(?:\s|$)|(\S+)(?:\s|$)/g;let s;for(t=t.replace(/[\u00a0\u200b]/g," ");s=r.exec(t);)s[1]?n[s[1].toLowerCase()]=s[2]:s[3]?n[s[3].toLowerCase()]=s[4]:s[5]?n[s[5].toLowerCase()]=s[6]:s[7]?e.push(s[7]):s[8]?e.push(s[8]):s[9]&&e.push(s[9]);return{named:n,numeric:e}},t.hasRequiredAtts=function(t,n){for(let e=0;e<n.length;e++){const r=n[e];if(!t.hasOwnProperty(r)||""===t[r].trim())return!1}return!0},t.substr=function(t,n,e=null){const r=(t=String(t)).length;n=parseInt(n,10),n=isNaN(n)?0:n<0?Math.max(r+n,0):Math.min(n,r),null===e?e=r-n:(e=parseInt(e,10),isNaN(e)&&(e=0));let s=n+e;return e<0?s=r+e:s>r&&(s=r),t.substring(n,s)},t.init()},new window.GWPAdvancedMergeTags;