window.gvDTResponsive=window.gvDTResponsive||{},window.gvDTFixedHeaderColumns=window.gvDTFixedHeaderColumns||{},window.gvDTButtons=window.gvDTButtons||{},function($){$.fn.dataTable.ext.errMode="throw";var gvDataTables={tablesData:{},init:function(){$(".gv-datatables").each(function(i,e){var options=window.gvDTglobals[i],viewId=$(this).attr("data-viewid");gvDataTables.tablesData[viewId]=options.ajax.data,options.buttons=gvDataTables.setButtons(options),options.drawCallback=function(data){window.gvEntryNotes&&window.gvEntryNotes.init(),data.json.inlineEditTemplatesData&&$(window).trigger("gravityview-inline-edit/extend-template-data",data.json.inlineEditTemplatesData),$(window).trigger("gravityview-inline-edit/init")},options.ajax.data=function(e){return $.extend({},e,gvDataTables.tablesData[viewId])},i<gvDTFixedHeaderColumns.length&&gvDTFixedHeaderColumns.hasOwnProperty(i)&&("1"===gvDTFixedHeaderColumns[i].fixedheader.toString()&&(options.fixedHeader=!0),"1"===gvDTFixedHeaderColumns[i].fixedcolumns.toString()&&(options.fixedColumns=!0)),i<gvDTResponsive.length&&gvDTResponsive.hasOwnProperty(i)&&"1"===gvDTResponsive[i].responsive.toString()&&("1"===gvDTResponsive[i].hide_empty.toString()?options.responsive={details:{renderer:gvDataTables.customResponsiveRowRenderer}}:options.responsive=!0),$(this).DataTable(options).on("draw.dt",function(e,settings){new $.fn.dataTable.Api(settings).column(0).data().length&&$(e.target).parents(".gv-container-no-results").removeClass("gv-container-no-results").siblings(".gv-widgets-no-results").removeClass("gv-widgets-no-results")})})},setButtons:function(options){var buttons=[];return options&&options.buttons&&options.buttons.length>0&&(options.buttons.forEach(function(button,i){"print"===button.extend?buttons[i]=$.extend(!0,{},gvDataTables.buttonCommon,gvDataTables.buttonCustomizePrint,button):buttons[i]=$.extend(!0,{},gvDataTables.buttonCommon,button)}),$.fn.dataTable.Buttons.swfPath=gvDTButtons.swf||""),buttons},buttonCommon:{exportOptions:{format:{body:function(data,column,row){var newValue=data;return 0===newValue.length?newValue:(newValue=newValue.replace(/\n/g," "),newValue=$("<span>"+newValue+"</span>").find("li").after("; ").end().find("img").replaceWith(function(){return $(this).attr("alt")}).end().find("br").replaceWith(" ").end().find(".map-it-link").remove().end().text())}}}},buttonCustomizePrint:{customize:function(win){$(win.document.body).find("table").addClass("compact").css("font-size","inherit").css("table-layout","auto")}},customResponsiveRowRenderer:function(api,rowIdx){var data=api.cells(rowIdx,":hidden").eq(0).map(function(cell){var header=$(api.column(cell.column).header());if(header.hasClass("control")||header.hasClass("never"))return"";var idx=api.cell(cell).index();if(0===api.cell(cell).data().length)return"";var dtPrivate=api.settings()[0],cellData=dtPrivate.oApi._fnGetCellData(dtPrivate,idx.row,idx.column,"display");return'<li data-dtr-index="'+idx.column+'"><span class="dtr-title">'+header.text()+':</span> <span class="dtr-data">'+cellData+"</span></li>"}).toArray().join("");return!!data&&$('<ul data-dtr-index="'+rowIdx+'"/>').append(data)}};$(document).ready(function(){gvDataTables.init(),$(".gv-search-clear").off().on("click",function(e){var $form=$(this).parents("form"),viewId=$form.attr("data-viewid"),$container=$("#gv-datatables-"+viewId),$table=$container.find(".gv-datatables").DataTable(),tableData=gvDataTables.tablesData?gvDataTables.tablesData[viewId]:null;$table.length&&(e.stopImmediatePropagation(),e.preventDefault(),$form.find("input").filter(":text, :password, :file").not(":hidden").val("").end().filter(":checkbox, :radio").removeAttr("checked").end().end().find("textarea").val("").end().find("select").prop("selectedIndex",-1).find("option:selected").removeAttr("selected"),tableData.getData=!1,gvDataTables.tablesData[viewId]=tableData,window.history.pushState(null,null,window.location.pathname),$table.ajax.reload(),$(this).hide(100))}),$(".gv-widget-search").on("submit",function(e){e.preventDefault();var getData={},viewId=$(this).attr("data-viewid"),$container=$("#gv-datatables-"+viewId),$table=$container.find(".gv-datatables").DataTable(),tableData=gvDataTables.tablesData?gvDataTables.tablesData[viewId]:null,inputs=$(this).serializeArray().filter(function(k){return""!==$.trim(k.value)});if(!tableData)return void this.submit();1*tableData.hideUntilSearched&&$table.on("draw.dt",function(){$container.toggleClass("hidden",inputs.length<=1)});for(var i=0;i<inputs.length;i++){var name=inputs[i].name,value=inputs[i].value,matches=name.match(/(.*?)\[(.*)\]/);matches?(getData[matches[1]]||(getData[matches[1]]={}),getData[matches[1]][matches[2]]=value):getData[name]=value}tableData.search={value:""},tableData.getData=Object.keys(getData).length>1&&JSON.stringify(getData),tableData.setUrlOnSearch&&window.history.pushState(null,null,tableData.getData?"?"+$(this).serialize():window.location.pathname),gvDataTables.tablesData[viewId]=tableData,$table.ajax.reload()})})}(jQuery);