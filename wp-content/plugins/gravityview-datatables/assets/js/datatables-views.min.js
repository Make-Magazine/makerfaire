window.gvDTResponsive=window.gvDTResponsive||{},window.gvDTFixedHeaderColumns=window.gvDTFixedHeaderColumns||{},window.gvDTButtons=window.gvDTButtons||{},function($){$.fn.dataTable.ext.errMode="throw";var gvDataTables={tablesData:{},init:function(){$(".gv-datatables").each(function(i,e){var options=window.gvDTglobals[i],viewId=$(this).attr("data-viewid");gvDataTables.tablesData[viewId]=options.ajax.data,options.buttons=gvDataTables.setButtons(options),options.drawCallback=function(data){window.gvEntryNotes&&window.gvEntryNotes.init(),data.json.inlineEditTemplatesData&&$(window).trigger("gravityview-inline-edit/extend-template-data",data.json.inlineEditTemplatesData),$(window).trigger("gravityview-inline-edit/init")},options.ajax.data=function(e){return $.extend({},e,gvDataTables.tablesData[viewId])};var table=$(this).DataTable(options);if(table.on("draw.dt",function(e,settings){new $.fn.dataTable.Api(settings).column(0).data().length&&$(e.target).parents(".gv-container-no-results").removeClass("gv-container-no-results").siblings(".gv-widgets-no-results").removeClass("gv-widgets-no-results")}),i<gvDTResponsive.length&&gvDTResponsive.hasOwnProperty(i)&&"1"===gvDTResponsive[i].responsive.toString()){var responsiveConfig={};"1"===gvDTResponsive[i].hide_empty.toString()&&(responsiveConfig={details:{renderer:gvDataTables.customResponsiveRowRenderer}}),new $.fn.dataTable.Responsive(table,responsiveConfig)}i<gvDTFixedHeaderColumns.length&&gvDTFixedHeaderColumns.hasOwnProperty(i)&&("1"===gvDTFixedHeaderColumns[i].fixedheader.toString()&&new $.fn.dataTable.FixedHeader(table),"1"===gvDTFixedHeaderColumns[i].fixedcolumns.toString()&&new $.fn.dataTable.FixedColumns(table))})},setButtons:function(options){var buttons=[];return options&&options.buttons&&options.buttons.length>0&&(options.buttons.forEach(function(button,i){"print"===button.extend?buttons[i]=$.extend(!0,{},gvDataTables.buttonCommon,gvDataTables.buttonCustomizePrint,button):buttons[i]=$.extend(!0,{},gvDataTables.buttonCommon,button)}),$.fn.dataTable.Buttons.swfPath=gvDTButtons.swf||""),buttons},buttonCommon:{exportOptions:{format:{body:function(data,column,row){var newValue=data;return 0===newValue.length?newValue:(newValue=newValue.replace(/\n/g," "),newValue=$("<span>"+newValue+"</span>").find("li").after("; ").end().find("img").replaceWith(function(){return $(this).attr("alt")}).end().find("br").replaceWith(" ").end().find(".map-it-link").remove().end().text())}}}},buttonCustomizePrint:{customize:function(win){$(win.document.body).find("table").addClass("compact").css("font-size","inherit").css("table-layout","auto")}},customResponsiveRowRenderer:function(api,rowIdx){var data=api.cells(rowIdx,":hidden").eq(0).map(function(cell){var header=$(api.column(cell.column).header());if(header.hasClass("control")||header.hasClass("never"))return"";var idx=api.cell(cell).index();if(0===api.cell(cell).data().length)return"";var dtPrivate=api.settings()[0],cellData=dtPrivate.oApi._fnGetCellData(dtPrivate,idx.row,idx.column,"display");return'<li data-dtr-index="'+idx.column+'"><span class="dtr-title">'+header.text()+':</span> <span class="dtr-data">'+cellData+"</span></li>"}).toArray().join("");return!!data&&$('<ul data-dtr-index="'+rowIdx+'"/>').append(data)}};$(document).ready(function(){gvDataTables.init(),$(".gv-widget-search").on("submit",function(e){e.preventDefault();var getData={},viewId=$(this).attr("data-viewid"),$container=$("#gv-datatables-"+viewId),$table=$container.find(".gv-datatables").DataTable(),tableData=gvDataTables.tablesData?gvDataTables.tablesData[viewId]:null,inputs=$(this).serializeArray().filter(function(k){return""!==$.trim(k.value)});if(!tableData)return void this.submit();1*tableData.hideUntilSearched&&$table.on("draw.dt",function(){$container.toggleClass("hidden",inputs.length<=1)}),inputs.forEach(function(input){getData[input.name]=input.value}),tableData.search={value:""},tableData.getData=Object.keys(getData).length>1&&JSON.stringify(getData),tableData.setUrlOnSearch&&window.history.pushState(null,null,tableData.getData?"?"+$(this).serialize():window.location.pathname),gvDataTables.tablesData[viewId]=tableData,$table.ajax.reload()})})}(jQuery);