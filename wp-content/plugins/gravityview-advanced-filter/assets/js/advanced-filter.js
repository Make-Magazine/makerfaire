jQuery(document).ready(function(e){const{ajaxurl:u}=window,{fetchFields:g}=window.gkAdvancedFilter,{translations:f,targetElementSelector:o}=window.gkQueryFilters_advanced_filters;e(o||"#entry_filters").removeClass("hide-if-js");let{fields:a}=window.gkQueryFilters_advanced_filters;const d=e("#gravityview_form_id"),y=d.val(),r=()=>{const{action:n,nonce:t}=g;e.ajax({type:"post",dataType:"json",url:u,data:{action:n,nonce:t,form_id:e("#gravityview_form_id").val()},success:i=>{i.success&&({fields_complete:a}=i.data)},complete:()=>{e(o).data("query-filters").updateFields(a)}})};a.length||r(),d.on("change",y===""?r:null),e("body").on("gravityview_form_change",r).on("dialogopen",".gv-fields",function(n){const t=e(n.target).find(".gv-setting-container-conditional_logic_container .gv-field-conditional-logic"),i=e(n.target).find(".gv-setting-container-conditional_logic input"),v=e(n.target).find(".gv-setting-container-conditional_logic_fail_output");let _=null;if(!(t.length===0||t.hasClass("initialized"))){t.addClass("initialized");try{_=JSON.parse(i.val())}catch{}t.queryFilters({conditions:_,fields:a,translations:f,onConditionsUpdate:c=>{i.val(JSON.stringify(c)),v.toggleClass("hidden",!c)},maxNestingLevel:2})}});const s=e(o).data("query-filters"),l=function(){setTimeout(function(){e("#gravityview_se_show_only_entries_by_current_user").prop("checked",s.hasConditionsFor("created_by"))},0)};l(),e(document).on(o+"/updated",l),e("#gravityview_se_show_only_entries_by_current_user").on("change",function(){this.checked?!s.hasConditionsFor("created_by")&&s.addCondition("created_by","created_by","is"):s.removeConditionsFor("created_by")})});
