rmgControllers.controller("buildCtrl",["$scope","$routeParams","$http","$interval","uiGridConstants","uiGridGroupingConstants",function(s,r,t,n,e,a){s.reports={},s.reports.loading=!0,s.reports.showGrid=!1,s.reports.showbuild=!1,s.reports.selectedFields={},"location"in r&&"true"===r.location&&(s.reports.location=!0),s.msg={},s.reports.formName=function(t){var a=t;return angular.forEach(s.reports.forms,function(e,r){e.id==t&&(a=e.name)}),a},s.fieldSelect={enableRowSelection:!0,enableSelectAll:!1,selectionRowHeaderWidth:35,rowHeight:35,showGridFooter:!0,enableFiltering:!0,onRegisterApi:function(r){(s.fieldSelect.gridApi=r).selection.on.rowSelectionChanged(s,function(e){s.reports.selectedFields=r.selection.getSelectedRows()})}},s.fieldSelect.columnDefs=[{name:"id",width:"50"},{name:"label"},{name:"choices"}],s.fieldSelect.multiSelect=!0,s.selectAll=function(){s.fieldSelect.gridApi.selection.selectAllRows()},s.clearAll=function(){s.fieldSelect.gridApi.selection.clearSelectedRows()},s.generateReport=function(){var e=s.reports.formSelect.split(),r=s.reports.selectedFields,t={},a=!1,e=(1==s.reports.rmt.comment&&(a=!0),angular.forEach(s.reports.rmt,function(e,r){build=[],angular.forEach(e,function(e){e.checked&&(e.aggregated=a,build.push(e))}),t[r]=build}),{formSelect:e,selectedFields:r,rmtData:t,type:"customRpt",location:s.reports.location,tickets:s.reports.tickets});s.reports.callAJAX(e)},s.reports.changeGrouping=function(e){s.gridApi.grouping.clearGrouping(),"item"==e?(s.gridApi.grouping.groupColumn("item"),s.gridApi.grouping.groupColumn("resource_id")):"faire"==e&&(s.gridApi.grouping.groupColumn("faire"),s.gridApi.grouping.groupColumn("area"),s.gridApi.grouping.groupColumn("subarea"),s.gridApi.grouping.groupColumn("location")),s.gridApi.grouping.aggregateColumn("qty",a.aggregation.SUM)},s.reports.callAJAX=function(e){s.reports.loading=!0,t({method:"post",url:i,data:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then(function(e){"success"in e.data?e.data.success||alert(e.data.message):(s.gridOptions.columnDefs=e.data.columnDefs,s.gridOptions.data=e.data.data,s.reports.showGrid=!0,s.reports.showbuild=!1)}).finally(function(){s.reports.loading=!1})},s.gridOptions={enableFiltering:!0,enableSorting:!0,enableGridMenu:!0,rowHeight:100,exporterCsvFilename:"export.csv",exporterCsvLinkElement:angular.element(document.querySelectorAll(".custom-csv-link-location")),exporterFieldCallback:function(e,r,t,a){if("editDropdownOptionsArray"in t.colDef){for(var o={},i=t.colDef.editDropdownOptionsArray,l=0;l<i.length;l++)o[i[l].id]=i[l].fkey;return a?o[a]:""}return a},onRegisterApi:function(e){s.gridApi=e}},s.reports.showbuild=!0,jQuery("#pageTitle").html("Reports"),jQuery("#subTitle").html("Build Your Own Report"),s.reports.tableName="formData";var o="tableData",i=(s.filterExport=function(e,r,t,a){return"unknown"},"/resource-mgmt/ajax/reports.ajax.php");s.highlightFilteredHeader=function(e,r,t,a){return t.filters[0].term?"header-filtered":""};t({method:"post",url:i,data:JSON.stringify({table:s.reports.tableName,type:o,viewOnly:!0}),headers:{"Content-Type":"application/json"}}).then(function(e){"forms"in e.data&&("formSelect"in r?s.reports.formSelect=r.formSelect.split(","):s.reports.formSelect="",s.reports.forms=e.data.forms)}).finally(function(){s.reports.loading=!1,s.reports.showGrid=!0}),s.retGridData=function(){s.reports.loading=!0;s.gridOptions.columnDefs=[],t({method:"post",url:"/resource-mgmt/ajax/reports.ajax.php",data:JSON.stringify({table:s.reports.tableName,type:o,viewOnly:!0,formSelect:s.reports.formSelect}),headers:{"Content-Type":"application/json"}}).then(function(e){var t,a,o,i,l;"fields"in e.data&&(s.fieldSelect.data=e.data.fields,t=[],(t="fields"in r?r.fields.split(","):t).push("303","151"),s.fieldSelect.gridApi.selection.selectRow)&&angular.forEach(s.fieldSelect.data,function(e,r){-1!=t.indexOf(String(e.id))&&n(function(){s.fieldSelect.gridApi.selection.selectRow(s.fieldSelect.data[r])},0,1)}),"rmt"in e.data&&(s.reports.rmt=e.data.rmt,"resource"in r&&(a=r.resource.split(","),angular.forEach(s.reports.rmt.resource,function(e,r){-1!=a.indexOf(String(e.value))&&(s.reports.rmt.resource[r].checked=!0)})),"attribute"in r&&(o=r.attribute.split(","),angular.forEach(s.reports.rmt.attribute,function(e,r){-1!=o.indexOf(String(e.value))&&(s.reports.rmt.attribute[r].checked=!0)})),"attention"in r&&(i=r.attention.split(","),angular.forEach(s.reports.rmt.attention,function(e,r){-1!=i.indexOf(String(e.value))&&(s.reports.rmt.attention[r].checked=!0)})),"other"in r)&&(l=r.other.split(","),angular.forEach(s.reports.rmt.meta,function(e,r){-1!=l.indexOf(String(e.value))&&(s.reports.rmt.meta[r].checked=!0)}))}).finally(function(){s.reports.loading=!1,s.reports.showGrid=!0,s.reports.showFields=!0})}}]).filter("griddropdown",function(){return function(e,r){var t,a={};if(r.col)for(var o=r.col.colDef.editDropdownOptionsArray,i=0;i<o.length;i++)a[o[i].id]=o[i].fkey;return e?(r=a[e])||((t=e.match(/(.+)( \(\d+\))/))&&(r=a[t[1]])?r+t[2]:e):""}}),rmgControllers.controller("cannedCtrl",["$scope","$routeParams","$http","$interval","uiGridConstants",function(l,e,t,r,o){var a,i,s;l.reports={},l.reports.loading=!0,l.reports.showGrid=!1,l.reports.showLinks=!1,l.reports.selFaire="",l.data=[],l.msg={},l.canned_rpt=[],l.reports_only=jQuery("#reports_only").val(),l.display_faire="",l.handleSelect=function(){""!=l.reports.subRoute&&(window.location="#canned/"+l.reports.subRoute+"/"+l.reports.selFaire)},l.retrieveData=function(r){var e;"faires"==r&&(e=jQuery.param({type:r}),t({method:"post",url:"/resource-mgmt/ajax/ajax.php",data:e,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){"error"in e.data?alert(e.data.error):"faires"==r&&(l.data[r]=e.data[r],""==l.reports.selFaire&&(setFaire=0,l.reports.selFaire=l.data.faires[0].ID,l.display_faire=l.data.faires[0].faire_name),l.reports.showLinks=!0)}).finally(function(){"faires"==r&&(faires=l.data.faires,angular.forEach(faires,function(e,r){e.ID==l.reports.selFaire&&(l.display_faire=l.data.faires[r].faire_name)}))}))},l.gridOptions={exporterMenuExcel:!1,enableFiltering:!0,enableGridMenu:!0,showGridFooter:!0,showColumnFooter:!0,rowHeight:100,exporterMenuPdf:!0,exporterPdfDefaultStyle:{fontSize:6},exporterPdfTableStyle:{margin:[-20,-10,-10,-20]},exporterPdfTableHeaderStyle:{fontSize:6,bold:!1},exporterCsvFilename:e.sub+"-export.csv",exporterCsvLinkElement:angular.element(document.querySelectorAll(".custom-csv-link-location")),onRegisterApi:function(e){l.gridApi=e},exporterPdfMaxGridWidth:680,exporterPdfFooter:function(e,r){return{text:"Page "+e.toString()+" of "+r.toString(),style:"footerStyle"}},exporterFieldCallback:function(e,r,t,a){if("editDropdownOptionsArray"in t.colDef){for(var o={},i=t.colDef.editDropdownOptionsArray,l=0;l<i.length;l++)o[i[l].id]=i[l].fkey;return a?o[a]:""}return a}},l.export=function(e="pdf"){var r,t="visible",a="visible";"csv"==l.export_format?(r=angular.element(document.querySelectorAll(".custom-csv-link-location")),l.gridApi.exporter.csvExport(t,a,r)):"pdf"==e&&l.gridApi.exporter.pdfExport(t,a)},l.reports.callAJAX=function(e){l.reports.showGrid=!0,l.reports.loading=!0;var a={area:{direction:o.ASC,priority:0},subarea:{direction:o.ASC,priority:1},location:{direction:o.ASC,priority:2}};t({method:"post",url:"/resource-mgmt/ajax/reports.ajax.php",data:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then(function(e){"success"in e.data?e.data.success||alert(e.data.message):(angular.forEach(e.data.columnDefs,function(e,r){var t=e.field;t in a&&(e.sort={direction:a[t].direction,priority:a[t].priority},e.sortingAlgorithm=function(e,r,t,a,o){var i=l.gridApi.core.sortHandleNulls(e,r);return null!==i?i:""==e?0:""==r?-1:e===r?0:r<e?1:e<r?-1:0}),"aggregationType"in e&&"uiGridConstants.aggregationTypes.sum"==e.aggregationType&&(e.aggregationType=o.aggregationTypes.sum,e.aggregationHideLabel=!0),"filter"in e&&"selectOptions"in e.filter&&(e.filter.type=o.filter.SELECT),"sortingAlgorithm"in e&&"numeric"==e.sortingAlgorithm&&(e.sortingAlgorithm=function(e,r,t,a,o){return"asc"==o?e?r?e-r:-1:1:"desc"==o?e?r?e-r:1:-1:void 0})}),l.gridOptions.columnDefs=e.data.columnDefs,l.gridOptions.data=e.data.data,l.reports.showGrid=!0,l.reports.showbuild=!1)}).finally(function(){l.reports.loading=!1})},l.filterAfterDate=function(){var e=jQuery("#year").val(),r=jQuery("#month").val(),t=jQuery("#day").val();vars={faire:a,table:"wp_mf_lead_detail_changes",type:"tableData",dateAfter:e+"-"+r+"-"+t,subRoute:i};l.reports.callAJAX(vars)},e&&(void 0===e.sub||"undefined"===e.sub||jQuery("#wrapper").hasClass("toggled")||$("#menu-toggle").click(),l.reports.subRoute=e.sub,l.reports.selFaire=e.faire,a="faire"in e?e.faire:l.reports.selFaire="",s="","sponsor_order"==(i=e.sub)?(vars={faire:a,table:"sponsorOrder",type:"sponsorOrderRpt"},s="Sponsor Orders(s)",l.reports.callAJAX(vars)):"sponsor_pymt"==i?(vars={faire:a,table:"sponsorOrder",type:"paymentRpt"},s="Sponsor Payment(s)",l.reports.callAJAX(vars)):"cm_pymt"==i?(vars={faire:a,table:"exhibitOrder",type:"paymentRpt"},s="Exhibit Payment(s)",l.reports.callAJAX(vars)):"nonprofit_pymt"==i?(vars={formSelect:[],formType:["Exhibit","Master"],faire:a,payments:!0,selectedFields:[{id:"304.17",label:"Flags",choices:"NP Fee Full",type:"checkbox"},{id:"304.18",label:"Flags",choices:"NP Fee Discount",type:"checkbox"},{id:"304.19",label:"Flags",choices:"NP Fee Waived",type:"checkbox"},{id:151,label:"Exhibit Name",choices:"",type:"text",inputs:"",order:25},{id:45,label:"Are you a:",choices:"Non-profit or Cause or Mission based organization (Exhibit Fee applicable)",type:"radio",exact:!0},{id:303,label:"Status",choices:"Accepted",type:"radio",exact:!0,hide:!0}],rmtData:{resource:[],attribute:[],attention:[],meta:[{id:"res_status",type:"meta",value:"Resource Status",checked:!0}]},type:"customRpt"},s="Nonprofit Payment(s)",l.reports.callAJAX(vars)):"am_summary"==i?(vars={formSelect:[],formType:["Master","Exhibit","Performance","Startup Sponsor","Sponsor","Show Management"],faire:a,entryIDorder:50,entryIDwidth:30,locationOrder:10,formTypeorder:400,dispFormType:!1,dispFormID:!1,useFormSC:!0,placedOnly:!0,selectedFields:[{id:96,label:"Maker",choices:"",type:"name",inputs:[{id:"96.3",label:"First",name:""},{id:"96.6",label:"Last",name:""}],order:250,width:"*"},{id:99,label:"Contact #",choices:"",type:"phone",inputs:"",order:270},{id:151,label:"Proj Name",choices:"",type:"text",inputs:"",order:40},{id:303,label:"Status",choices:"Accepted",type:"radio",exact:!0,hide:!0,order:150},{id:879,label:"Days",choices:"all",type:"checkbox",order:120},{id:339,label:"Type",choices:"all",type:"checkbox",order:230,width:40}],rmtData:{resource:[{id:"all",value:"ALL RESOURCES",checked:!0,order:60}],attribute:[{id:"2",value:"Final Space Size",checked:!0,order:110}],attention:[{id:"9",value:"Area Manager Notes",checked:!0,order:80},{id:"10",value:"Early Setup",checked:!0,order:90},{id:"11",value:"No Friday",checked:!0,order:100}],meta:[]},type:"customRpt",location:!0},s="AM summary(short)",l.reports.callAJAX(vars)):"zoho"==i?(vars={formSelect:[],formType:["Master","Exhibit","Performance","Startup Sponsor","Sponsor","Show Management"],faire:a,dispFormID:!1,dispFormType:!1,useFormSC:!1,entryIDorder:200,locationOrder:300,formTypeorder:400,selectedFields:[{id:879,label:"Days",choices:"all",type:"checkbox"},{id:339,label:"Exhibit Type",choices:"all",type:"checkbox"},{id:16,label:"EXHIBIT SUMMARY",choices:"",type:"textarea",inputs:"",order:1500},{id:83,label:"FIRE",choices:"all",type:"radio",order:1800},{id:85,label:"Describe any fire or safety issues.",choices:"",type:"textarea",inputs:""},{id:96,label:"MAKER NAME",choices:"",type:"name",order:500,inputs:[{id:"96.3",label:"First",name:""},{id:"96.6",label:"Last",name:""}]},{id:98,label:"EMAIL",choices:"",type:"email",inputs:"",order:700},{id:99,label:"PHONE",choices:"",type:"phone",inputs:"",order:600},{id:151,label:"EXHIBIT",choices:"",type:"text",inputs:"",order:100},{id:293,label:"WRIST",choices:"Yes",type:"radio",order:1700},{id:293,label:"WRIST",choices:"No",type:"radio",order:1700},{id:303,label:"Status",choices:"Proposed",type:"radio"},{id:303,label:"Status",choices:"Accepted",type:"radio"},{id:303,label:"Status",choices:"Rejected",type:"radio"},{id:303,label:"Status",choices:"Wait List",type:"radio"},{id:303,label:"Status",choices:"Cancelled",type:"radio"},{id:317,label:"WASTE",choices:"Yes",type:"radio",order:1900},{id:317,label:"Will your exhibit produce any waste?",choices:"No",type:"radio"}],rmtData:{resource:[{id:"all",value:"ALL RESOURCES",checked:!0,order:1600},{id:"2",value:"TABLE",checked:!0,order:900},{id:"3",value:"CHAIR",checked:!0,order:1e3},{id:"9",value:"ELEC",checked:!0,order:1100},{id:"15",value:"H2O",checked:!0,order:2e3},{id:"18",value:"FENCE",checked:!0,order:2100},{id:"19",value:"BARR",checked:!0,order:2200},{id:"45",value:"UMB",checked:!0,order:2300},{id:"47",value:"GRIND",checked:!0,order:2400}],attribute:[{id:"2",value:"SIZE",checked:!0,order:800},{id:"4",value:"IN/OUT",checked:!0,order:1400},{id:"9",value:"NZ",checked:!0,order:1300},{id:"11",value:"INT",checked:!0,order:1200}],attention:[{id:"9",value:"Area Manager Notes",checked:!0,order:2500},{id:"10",value:"Early Setup",checked:!0},{id:"11",value:"No Friday",checked:!0}],meta:[]},type:"customRpt",location:!0},s="Zoho",l.reports.callAJAX(vars)):"am_tcp"==i?(vars={formSelect:[],formType:["Master","Exhibit","Performance","Startup Sponsor","Sponsor","Show Management"],faire:a,dispFormID:!1,dispFormType:!1,useFormSC:!1,entryIDorder:200,locationOrder:300,formTypeorder:400,selectedFields:[{id:151,label:"EXHIBIT",choices:"",type:"text",inputs:"",order:100},{id:303,label:"Status",choices:"Proposed",type:"radio"},{id:303,label:"Status",choices:"Accepted",type:"radio"},{id:303,label:"Status",choices:"Rejected",type:"radio"},{id:303,label:"Status",choices:"Wait List",type:"radio"},{id:303,label:"Status",choices:"Cancelled",type:"radio"},{id:879,label:"Days",choices:"all",type:"checkbox"},{id:339,label:"Exhibit Type",choices:"all",type:"checkbox"}],rmtData:{resource:[{id:"2",value:"TABLE",checked:!0,aggregated:!1,order:2e3,comments:!1},{id:"3",value:"CHAIR",checked:!0,aggregated:!1,order:3e3,comments:!1},{id:"9",value:"ELEC",checked:!0,order:4e3,comments:!1},{id:"10",value:"ELEC 220V",checked:!0,order:5e3,comments:!1}],attribute:[{id:"2",value:"SIZE",checked:!0,order:1e3}],attention:[],meta:[]},type:"customRpt",location:!0},s="AM TCP",l.reports.callAJAX(vars)):"table_chairs"==i?(vars={formSelect:[],formType:["Master","Exhibit","Performance","Startup Sponsor","Sponsor","Show Management"],rtnIfRMTempty:!1,faire:a,dispFormID:!1,dispFormType:!1,useFormSC:!1,entryIDorder:50,locationOrder:10,placedOnly:!0,selectedFields:[{id:879,label:"Days",choices:"all",type:"checkbox",order:80},{id:339,label:"Entry Type",choices:"all",type:"checkbox",order:90},{id:151,label:"Proj Name",choices:"",type:"text",inputs:"",order:40},{id:303,label:"Status",choices:"Accepted",type:"radio",exact:!0,hide:!1,order:110}],rmtData:{resource:[{id:"2",value:"Tables",checked:!0,aggregated:!1,order:60,columns:!0,sortingAlgorithm:!0},{id:"3",value:"Chairs",checked:!0,aggregated:!1,order:70,columns:!0,sortingAlgorithm:!0}],attribute:[],attention:[],meta:[]},type:"customRpt",location:!0},s="Table/Chairs",l.reports.callAJAX(vars)):"barr_fence"==i?(vars={formSelect:[],formType:["Master","Exhibit","Performance","Startup Sponsor","Sponsor","Show Management"],faire:a,rtnIfRMTempty:!1,dispFormID:!1,dispFormType:!1,useFormSC:!1,entryIDorder:50,locationOrder:10,placedOnly:!0,selectedFields:[{id:151,label:"Proj Name",type:"text",order:40},{id:303,label:"Status",choices:"Accepted",type:"radio",exact:!0,order:140},{id:879,label:"Days",choices:"all",type:"checkbox",order:110},{id:339,label:"Entry Type",choices:"all",type:"checkbox",order:120}],orderBy:"location",rmtData:{resource:[{id:"19",value:"Barricade",checked:!0,aggregated:!1,order:70,columns:!0},{id:"18",value:"Fencing",checked:!0,aggregated:!1,order:80,columns:!0},{id:"22",value:"Pipe & Drape",checked:!0,aggregated:!1,order:90,columns:!0},{id:"23",value:"Pipe Only",checked:!0,aggregated:!1,order:100,columns:!0}],attribute:[],attention:[],meta:[]},type:"customRpt",location:!0},s="Barr/Fence",l.reports.callAJAX(vars)):"electrical"==i?(vars={formSelect:[],formType:["Master","Exhibit","Performance","Startup Sponsor","Sponsor","Show Management"],faire:a,rtnIfRMTempty:!1,dispFormID:!1,dispFormType:!1,useFormSC:!1,entryIDorder:50,locationOrder:10,placedOnly:!0,selectedFields:[{id:74,label:"What are you powering",choices:"",type:"text",order:100},{id:"879",label:"Days",choices:"all",type:"checkbox",order:110},{id:339,label:"Entry Type",choices:"all",type:"checkbox",order:120},{id:151,label:"Proj Name",choices:"",type:"text",inputs:"",order:40},{id:303,label:"Status",choices:"Accepted",type:"radio",exact:!0,order:140}],rmtData:{resource:[{id:"9",value:"Electrical 120V",checked:!0,aggregated:!1,comments:!0,columns:!0,totals:!0,order:70},{id:"10",value:"Electrical 220V",checked:!0,aggregated:!1,comments:!0,columns:!0,totals:!0,order:80}],attribute:[],attention:[],meta:[]},type:"customRpt",location:!0},s="Electrical",l.reports.callAJAX(vars)):"guest_seat"==i?(vars={formSelect:[],formType:["Master","Exhibit","Performance","Startup Sponsor","Sponsor","Show Management"],faire:a,dispFormID:!1,dispFormType:!1,useFormSC:!1,selectedFields:[{id:151,label:"Proj Name",choices:"",type:"text",inputs:"",order:25},{id:303,label:"Status",choices:"Proposed",type:"radio"},{id:303,label:"Status",choices:"Accepted",type:"radio"},{id:879,label:"Days",choices:"all",type:"checkbox"},{id:339,label:"Exhibit Type",choices:"all",type:"checkbox"}],rmtData:{resource:[{id:"11",value:"Bench",checked:!0,aggregated:!1},{id:"12",value:"Bleachers",checked:!0,aggregated:!1}],attribute:[],attention:[],meta:[]},type:"customRpt",location:!0},s="Guest Seating",l.reports.callAJAX(vars)):"wb_stools"==i?(vars={formSelect:[],formType:["Master","Exhibit","Performance","Startup Sponsor","Sponsor","Show Management"],faire:a,rtnIfRMTempty:!1,dispFormID:!1,dispFormType:!1,useFormSC:!1,placedOnly:!0,entryIDorder:50,locationOrder:10,selectedFields:[{id:879,label:"Days",choices:"all",type:"checkbox",order:100},{id:339,label:"Entry Type",choices:"all",type:"checkbox",order:110},{id:151,label:"Proj Name",choices:"",type:"text",inputs:"",order:40},{id:303,label:"Status",choices:"Accepted",type:"radio",order:130}],rmtData:{resource:[{id:"11",value:"Bench",checked:!0,aggregated:!1,order:60,columns:!0,totals:!0},{id:"12",value:"Bleachers",checked:!0,aggregated:!1,order:85,columns:!0,totals:!0},{id:"41",value:"Work Bench",checked:!0,aggregated:!1,order:70,columns:!0,totals:!0},{id:"42",value:"Stools",checked:!0,aggregated:!1,order:80,columns:!0,totals:!0}],attribute:[],attention:[],meta:[]},type:"customRpt",location:!0},s="Workbench/Stools",l.reports.callAJAX(vars)):"specials"==i?(vars={formSelect:[],formType:["Master","Exhibit","Performance","Startup Sponsor","Sponsor","Show Management"],faire:a,dispFormID:!1,dispFormType:!1,useFormSC:!1,entryIDorder:50,locationOrder:10,rtnIfRMTempty:!1,placedOnly:!0,selectedFields:[{id:879,label:"Days",choices:"all",type:"checkbox",order:100},{id:339,label:"Entry Type",choices:"all",type:"checkbox",order:110},{id:151,label:"Proj Name",choices:"",type:"text",inputs:"",order:40},{id:303,label:"Status",choices:"Accepted",type:"radio",order:130}],rmtData:{resource:[{id:"15",value:"Water",checked:!0,aggregated:!0,order:60},{id:"19",value:"Barricade",checked:!0,aggregated:!0,order:61},{id:"35",value:"Heavy Equipment",checked:!0,aggregated:!0,order:62},{id:"47",value:"Storage",checked:!0,aggregated:!0,order:63},{id:"26",value:"Rigging",checked:!0,aggregated:!0,order:64},{id:"28",value:"Sand",checked:!0,aggregated:!0,order:65},{id:"29",value:"Sand Bags",checked:!0,aggregated:!0,order:66},{id:"14",value:"Garbage",checked:!0,aggregated:!0,order:66},{id:"16",value:"Water Coolers",checked:!0,aggregated:!0,order:66},{id:"17",value:"Whiteboard",checked:!0,aggregated:!0,order:67},{id:"20",value:"Road Plate",checked:!0,aggregated:!0,order:68},{id:"21",value:"Milk Crates",checked:!0,aggregated:!0,order:69},{id:"24",value:"Port A Pottie",checked:!0,aggregated:!0,order:70},{id:"25",value:"Propane",checked:!0,aggregated:!0,order:71},{id:"27",value:"Safety Glasses",checked:!0,aggregated:!0,order:72},{id:"30",value:"Linens",checked:!0,aggregated:!0,order:73},{id:"31",value:"Yellow Jacket",checked:!0,aggregated:!0,order:74},{id:"32",value:"Signage",checked:!0,aggregated:!0,order:75},{id:"33",value:"Fire Extinguisher",checked:!0,aggregated:!0,order:76},{id:"34",value:"Container",checked:!0,aggregated:!0,order:77},{id:"45",value:"Umbrella",checked:!0,aggregated:!0,order:78},{id:"46",value:"Umbrella Stand",checked:!0,aggregated:!0,order:79},{id:"48",value:"Tent Walls",checked:!0,aggregated:!0,order:80},{id:"49",value:"Tent - Extra",checked:!0,aggregated:!0,order:81},{id:"50",value:"Special",checked:!0,aggregated:!0,order:82},{id:"51",value:"Stage",checked:!0,aggregated:!0,order:83},{id:"52",value:"Extension Cords",checked:!0,aggregated:!0,order:84},{id:"53",value:"Security",checked:!0,aggregated:!0,order:85},{id:"54",value:"Internet _Sponsors",checked:!0,aggregated:!0,order:86},{id:"55",value:"Audio Visual",checked:!0,aggregated:!0,order:87},{id:"56",value:"Flooring",checked:!0,aggregated:!0,order:88},{id:"57",value:"Structure",checked:!0,aggregated:!0,order:89},{id:"58",value:"Traveler",checked:!0,aggregated:!0,order:90},{id:"59",value:"Weekend",checked:!0,aggregated:!0,order:91}],attention:[{id:"10",value:"Early Setup",checked:!0,order:95},{id:"11",value:"No Friday",checked:!0,order:96}],attribute:[],meta:[]},type:"customRpt",location:!0},s="Specials",l.reports.callAJAX(vars)):"label"==i?(vars={formSelect:[],formType:["Master","Exhibit","Startup Sponsor","Sponsor","Show Management"],faire:a,dispFormID:!1,useFormSC:!0,formTypeorder:10,formTypeLabel:"SALES",entryIDLabel:"PROJECT_ID",selectedFields:[{id:"151",label:"PROJECT_NAME",choices:"",type:"text",inputs:"",order:20},{id:"73",label:"POWER",choices:"all",type:"radio",order:50},{id:"75",label:"AMPS",choices:"all",type:"radio",order:60},{id:"303",label:"STATUS",choices:"all",type:"radio",order:70},{id:"56",label:"CROWDSOURCE_FUNDING",choices:"all",type:"radio",order:80},{id:"320",label:"TOPIC",choices:"all",type:"select",order:90},{id:"302",label:"PRE_LOC",choices:"all",type:"checkbox",order:100},{id:"307",label:"REQUEST",choices:"",type:"text",inputs:"",order:110},{id:"70",label:"OTHER",choices:"all",type:"checkbox",order:120},{id:"101.6",label:"COUNTRY",choices:"Country",type:"address",order:130},{id:"66",label:"ACTIVITY",choices:"all",type:"radio",order:160},{id:"44",label:"FOOD",choices:"all",type:"radio",order:180},{id:"84",label:"TOOL",choices:"all",type:"radio",order:190},{id:"83",label:"FIRE",choices:"all",type:"radio",order:200},{id:"879",label:"Days",choices:"all",type:"checkbox"},{id:"339",label:"Exhibit Type",choices:"all",type:"checkbox"}],rmtData:{resource:[],attribute:[{id:"19",value:"BOOTH_SIZE",checked:!0,order:30,comments:!0},{id:"20",value:"BOOTH_LOCATION",checked:!0,order:40,comments:!1},{id:"6",value:"LIGHTING",checked:!0,order:140,comments:!0},{id:"9",value:"NOISE",checked:!0,order:150,comments:!0},{id:"11",value:"INTERNET",checked:!0,order:170,comments:!0}],attention:[],meta:[]},type:"customRpt"},s="Label Placement",l.reports.callAJAX(vars)):"spdist"==i?(vars={formSelect:[],formType:["Sponsor"],faire:a,selectedFields:[{id:151,label:"Sponsor Company Name",choices:"",type:"text",inputs:""},{id:303,label:"Status",choices:"Proposed",type:"radio"},{id:303,label:"Status",choices:"Accepted",type:"radio"},{id:303,label:"Status",choices:"Rejected",type:"radio"},{id:303,label:"Status",choices:"Wait List",type:"radio"},{id:303,label:"Status",choices:"Cancelled",type:"radio"},{id:879,label:"Days",choices:"all",type:"checkbox"},{id:339,label:"Exhibit Type",choices:"all",type:"checkbox"},{id:737,label:"Additional Items",choices:"",type:"textarea"},{id:749,label:"Custom Order",choices:"",type:"textarea",inputs:""},{id:750,label:"Custom Order Price",choices:"",type:"number",inputs:""}],rmtData:{resource:[{id:"all",value:"All Resources",checked:!0,aggregated:!0},{id:"2",value:"Tables",checked:!0,aggregated:!0},{id:"3",value:"Chairs",checked:!0,aggregated:!0},{id:"9",value:"Electrical 120V",checked:!0,aggregated:!0},{id:"10",value:"Electrical 220V",checked:!0,aggregated:!0},{id:"11",value:"Bench",checked:!0,aggregated:!0},{id:"14",value:"Garbage",checked:!0,aggregated:!0},{id:"19",value:"Barricade",checked:!0,aggregated:!0},{id:"22",value:"Pipe & Drape",checked:!0,aggregated:!0},{id:"29",value:"Sand Bags",aggregated:!0},{id:"30",value:"Linens",checked:!0,aggregated:!0},{id:"41",value:"Work Bench",checked:!0,aggregated:!0},{id:"42",value:"Stools",checked:!0,aggregated:!0},{id:"45",value:"Umbrella",checked:!0,aggregated:!0},{id:"52",value:"Extension Cords",checked:!0,aggregated:!0},{id:"53",value:"Security",checked:!0,aggregated:!0},{id:"54",value:"Internet _Sponsors",checked:!0,aggregated:!0},{id:"55",value:"Audio Visual",checked:!0,aggregated:!0},{id:"56",value:"Flooring",checked:!0,aggregated:!0}],attribute:[{id:"all",value:"All Attributes",checked:!0,aggregated:!0}],attention:[],meta:[],comment:[]},type:"customRpt",location:!0},s="Sponsor Distribution",l.reports.callAJAX(vars)):"spint"===i?(vars={formSelect:[],formType:["Sponsor"],faire:a,selectedFields:[{id:78,label:"Does your exhibit use or disrupt radio frequencies?",choices:"all",type:"radio"},{id:"79",label:"Booth includes: (check all that apply)",choices:"all",type:"checkbox"},{id:81,label:"Describe additional details of your RF use.",choices:"",type:"textarea",inputs:""},{id:151,label:"Sponsor Company Name",choices:"",type:"text",inputs:""},{id:303,label:"Status",choices:"Proposed",type:"radio"},{id:303,label:"Status",choices:"Accepted",type:"radio"},{id:303,label:"Status",choices:"Rejected",type:"radio"},{id:303,label:"Status",choices:"Wait List",type:"radio"},{id:303,label:"Status",choices:"Cancelled",type:"radio"},{id:793,label:"Let's Talk",choices:"all",type:"radio"},{id:160,label:"Name Maker 1",choices:"",type:"name",inputs:[{id:"160.2",label:"Prefix",name:"",choices:[{text:"Mr.",value:"Mr.",isSelected:!1,price:""},{text:"Mrs.",value:"Mrs.",isSelected:!1,price:""},{text:"Miss",value:"Miss",isSelected:!1,price:""},{text:"Ms.",value:"Ms.",isSelected:!1,price:""},{text:"Dr.",value:"Dr.",isSelected:!1,price:""},{text:"Prof.",value:"Prof.",isSelected:!1,price:""},{text:"Rev.",value:"Rev.",isSelected:!1,price:""}],isHidden:!0,inputType:"radio"},{id:"160.3",label:"First",name:""},{id:"160.4",label:"Middle",name:"",isHidden:!0},{id:"160.6",label:"Last",name:""},{id:"160.8",label:"Suffix",name:"",isHidden:!0}]},{id:161,label:"Email Maker 1",choices:"",type:"email",inputs:""},{id:99,label:"Contact Phone Number [ALL]",choices:"",type:"phone",inputs:""}],rmtData:{resource:[{id:"54",value:"Internet _Sponsors",checked:!0,aggregated:!0}],attribute:[],attention:[],meta:[],comment:[]},type:"customRpt",location:!0},s="Sponsor Internet",l.reports.callAJAX(vars)):"prod_change"===i&&(vars={faire:a,table:"wp_mf_lead_detail_changes",type:"tableData",dateAfter:"",subRoute:i},s="Sponsor Internet",l.reports.callAJAX(vars)),jQuery("#pageTitle").html("Reports"),jQuery("#subTitle").html(s)),l.filterExport=function(e,r,t,a){return"unknown"},l.highlightFilteredHeader=function(e,r,t,a){return t.filters[0].term?"header-filtered":""}}]).filter("griddropdown",function(){return function(e,r){var t,a={};if(r.col)for(var o=r.col.colDef.editDropdownOptionsArray,i=0;i<o.length;i++)a[o[i].id]=o[i].fkey;return e?(r=a[e])||((t=e.match(/(.+)( \(\d+\))/))&&(r=a[t[1]])?r+t[2]:e):""}});var rmgControllers=angular.module("rmgControllers",[]),resourceApp=(rmgControllers.controller("VendorsCtrl",["$scope","$routeParams","$http","$q","$interval","uiGridConstants",function(i,e,l,s,r,a){var t={vendors:{list:{table:"wp_rmt_vendors",pageTitle:"Vendors",subTitle:"Vendor List"},resources:{table:"wp_rmt_vendor_resources",pageTitle:"Vendors",subTitle:"Vendor Resources"}},resources:{list:{table:"wp_rmt_resources",pageTitle:"Manage RMT Data",subTitle:"Resources"},items:{table:"wp_rmt_resource_categories",pageTitle:"Manage RMT Data",subTitle:"Resource Categories"}},faire:{data:{table:"wp_mf_faire",pageTitle:"Faire Data",subTitle:"Faire Data"},"global-faire":{table:"wp_mf_global_faire",pageTitle:"Faire Data",subTitle:"Global Faire Data"},orders:{table:"wp_rmt_vendor_orders",pageTitle:"",subTitle:""},areas:{table:"wp_mf_faire_area",pageTitle:"Faire Data",subTitle:"Faire Areas"},subareas:{table:"wp_mf_faire_subarea",pageTitle:"Faire Data",subTitle:"Faire SubAreas",faireSpecific:!0},schedule:{table:"wp_mf_schedule",pageTitle:"Faire Data",subTitle:"Assigned Location/Schedule",faireSpecific:!0}},entry:{resources:{table:"wp_rmt_entry_resources",pageTitle:"Entry Specific Data",subTitle:"Assigned Resources"},attention:{table:"wp_rmt_entry_attn",pageTitle:"Entry Specific Data",subTitle:"Assigned Attention"},attributes:{table:"wp_rmt_entry_attributes",pageTitle:"Entry Specific Data",subTitle:"Assigned Attributes"},atttibuteCategories:{table:"wp_rmt_entry_att_categories",pageTitle:"Manage RMT Data",subTitle:"Attributes"},workflow:{table:"wp_rmt_attn",pageTitle:"Manage RMT Data",subTitle:"Workflow/Attention"},ribbons:{table:"wp_mf_ribbons",pageTitle:"Manage Ribbon Data",subTitle:"Ribbons"}}},o=(i.data=[],i.resource={},i.resource.selFaire="",i.resource.faireSpecific=!1,i.resource.loading=!0,""),n="",d=(e&&(o=e.main,i.resource.subRoute=n=e.sub,"faireSpecific"in t[o][n]&&(i.resource.faireSpecific=t[o][n].faireSpecific),pageTitle=t[o][n].pageTitle,subTitle=t[o][n].subTitle,jQuery("#pageTitle").html(pageTitle),jQuery("#subTitle").html(subTitle),jQuery("#pageTitle").html(pageTitle),i.dispTablename=t[o][n].table),i.filterExport=function(e,r,t,a){return"unknown"},"/resource-mgmt/ajax/ajax.php");i.highlightFilteredHeader=function(e,r,t,a){return t.filters[0].term?"header-filtered":""},i.msg={},i.gridOptions={enableCellEditOnFocus:!0,enableSorting:!0,useExternalSorting:!1,enableFiltering:!0,minRowsToShow:20,rowEditWaitInterval:1,enableGridMenu:!0,exporterCsvFilename:o+"_"+n+"_export.csv",exporterCsvLinkElement:angular.element(document.querySelectorAll(".custom-csv-link-location")),exporterFieldCallback:function(e,r,t,a){if("editDropdownOptionsArray"in t.colDef){for(var o={},i=t.colDef.editDropdownOptionsArray,l=0;l<i.length;l++)o[i[l].id]=i[l].fkey;return a?o[a]:""}return a}},i.resource.faireSpecific&&(i.resource.faireSpecific,""==i.resource.selFaire)||l({method:"post",url:d,data:jQuery.param({table:i.dispTablename,type:"tableData"}),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){angular.forEach(t.data.columnDefs,function(e,r){e.headerCellClass=i.highlightFilteredHeader,"filter"in e&&(e.filter.type=a.filter.SELECT),"sort"in e&&("uiGridConstants.DESC"==e.sort.direction?e.sort.direction=a.DESC:e.sort.direction=a.ASC),t.data.columnDefs[r]=e}),i.gridOptions.columnDefs=t.data.columnDefs,i.gridOptions.data=t.data.data,i.resource.pInfo=t.data.pInfo,i.gridOptions.enableSorting=!0}).finally(function(){i.resource.loading=!1}),i.addNew=function(){i.gridOptions.data?i.gridOptions.data.unshift({}):(i.gridOptions.data=[],i.gridOptions.data.push({}))},i.save=function(){i.gridApi.rowEdit.flushDirtyRows(i.gridApi.grid)},i.saveRow=function(r){var t=i.resource.pInfo,a=i.gridOptions.data.indexOf(r),e={table:i.dispTablename,type:"updateData",data:r,pKeyField:i.resource.pInfo},o=s.defer();l({method:"post",url:d,data:jQuery.param(e),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){1==e.data.success?r.pkey||(i.gridOptions.data[a][t]=e.data.ID):alert("error in update. "+e.data.message),o.resolve()},function(e){o.reject()}),i.gridApi.rowEdit.setSavePromise(r,o.promise)},i.deleteRow=function(t){1==confirm("Are you sure want to delete this row (this cannot be undone)!")&&l({method:"post",url:d,data:jQuery.param({id:t.entity.ID,type:"deleteData",table:i.dispTablename,pKeyField:i.resource.pInfo}),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){var r;e.data.success?(r=i.gridOptions.data.indexOf(t.entity),i.gridOptions.data.splice(r,1)):alert("error in update. "+e.data.message)},function(e){})},i.gridOptions.onRegisterApi=function(e){(i.gridApi=e).rowEdit.on.saveRow(i,i.saveRow)},i.getArray=function(r){return Object.keys(r).map(function(e){return r[e]})},i.retrieveData=function(r){var e={type:r};"subareas"==r&&(e={table:i.dispTablename,type:"tableData",selfaire:i.resource.selFaire},i.resource.loading=!0),l({method:"post",url:d,data:jQuery.param(e),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){"error"in e.data?alert(e.data.error):"faires"==r?i.data[r]=e.data[r]:"subareas"==r&&(angular.forEach(e.data.columnDefs,function(e,r){"filter"in e&&(e.filter.type=a.filter.SELECT)}),i.gridOptions.columnDefs=e.data.columnDefs,i.gridOptions.data=e.data.data,i.resource.pInfo=e.data.pInfo)}).finally(function(){"faires"==r&&(faires=i.data.faires,angular.forEach(faires,function(e,r){e.faire==i.subRoute&&(i.resource.selFaire=r)})),i.resource.loading=!1})}}]).filter("griddropdown",function(){return function(e,r){var t,a={};if(r.col)for(var o=r.col.colDef.editDropdownOptionsArray,i=0;i<o.length;i++)a[o[i].id]=o[i].fkey;return e?(r=a[e])||((t=e.match(/(.+)( \(\d+\))/))&&(r=a[t[1]])?r+t[2]:e):""}}),rmgControllers.controller("ent2ResCtrl",["$scope","$routeParams","$http","uiGridConstants",function(o,e,i,l){o.reports={},o.reports.loading=!0,o.reports.showGrid=!1,o.reports.selFaire="",o.msg={};var r="ent2resource";"type"in e&&"all"!=e.type&&(o.reports.type=e.type,r=e.type+"_"+r),o.gridOptions={enableFiltering:!0,enableSorting:!0,enableGridMenu:!0,minRowsToShow:22,exporterCsvFilename:r+".csv",exporterCsvLinkElement:angular.element(document.querySelectorAll(".custom-csv-link-location")),exporterFieldCallback:function(e,r,t,a){if("editDropdownOptionsArray"in t.colDef){for(var o={},i=t.colDef.editDropdownOptionsArray,l=0;l<i.length;l++)o[i[l].id]=i[l].fkey;return a?o[a]:""}return a},onRegisterApi:function(e){o.gridApi=e}};jQuery("#pageTitle").html("Reports"),jQuery("#subTitle").html("Entry to Resource"),"faire"in e?(o.reports.selFaire=e.faire,o.reports.subRoute=e.faire):"type"in e?o.reports.type=e.type:o.reports.selFaire="",o.reports.route="ent2resources",o.retrieveData=function(r){var e,t,a;"faires"==r?(e=jQuery.param({type:r}),t="/resource-mgmt/ajax/ajax.php",a={"Content-Type":"application/x-www-form-urlencoded"}):"ent2res"==r&&(o.reports.loading=!0,o.reports.showGrid=!0,e=JSON.stringify({table:"wp_rmt_entry_resources",type:"ent2resource",faire:o.reports.selFaire,formType:o.reports.type}),t="/resource-mgmt/ajax/reports.ajax.php",a={"Content-Type":"application/json"}),i({method:"post",url:t,data:e,headers:a}).then(function(e){"error"in e.data?alert(e.data.error):"faires"==r?o.reports[r]=e.data[r]:"ent2res"==r&&(angular.forEach(e.data.columnDefs,function(e,r){"sort"in e&&(e.sort.direction=l.ASC)}),o.gridOptions.columnDefs=e.data.columnDefs,o.gridOptions.data=e.data.data)}).finally(function(){"faires"==r?(faires=o.reports.faires,angular.forEach(faires,function(e,r){e.faire==o.subRoute&&(o.reports.selFaire=r)})):"ent2res"==r&&(o.reports.loading=!1)})}}]).filter("griddropdown",function(){return function(e,r){var t,a={};if(r.col)for(var o=r.col.colDef.editDropdownOptionsArray,i=0;i<o.length;i++)a[o[i].id]=o[i].fkey;return e?(r=a[e])||((t=e.match(/(.+)( \(\d+\))/))&&(r=a[t[1]])?r+t[2]:e):""}}),angular.module("resourceApp",["ngRoute","rmgControllers","ngSanitize","ui.bootstrap","ui.grid.resizeColumns","ui.grid","ui.grid.edit","ui.grid.rowEdit","ui.grid.cellNav","ui.grid.exporter","ui.grid.selection","ui.grid.grouping","ui.grid.autoResize"]));resourceApp.config(["$locationProvider","$routeProvider",function(e,r){e.hashPrefix(""),r.when("/canned",{templateUrl:"partials/canned.html",controller:"cannedCtrl"}).when("/canned/:sub",{templateUrl:"partials/canned.html",controller:"cannedCtrl"}).when("/canned/:sub/:faire",{templateUrl:"partials/canned.html",controller:"cannedCtrl"}).when("/reports/build",{templateUrl:"partials/build.html",controller:"buildCtrl"}).when("/reports",{templateUrl:"partials/reports.html",controller:"reportsCtrl"}).when("/reports/:sub",{templateUrl:"partials/reports.html",controller:"reportsCtrl"}).when("/reports/:sub/:faire",{templateUrl:"partials/reports.html",controller:"reportsCtrl"}).when("/ent2resources",{templateUrl:"partials/ent2resources.html",controller:"ent2ResCtrl"}).when("/ent2resources/:type",{templateUrl:"partials/ent2resources.html",controller:"ent2ResCtrl"}).when("/ent2resources/:type/:faire",{templateUrl:"partials/ent2resources.html",controller:"ent2ResCtrl"}).when("/:main/:sub",{templateUrl:"partials/vendors.html",controller:"VendorsCtrl"}).otherwise({templateUrl:"partials/empty.html"})}]),jQuery(".tree-toggle").click(function(){jQuery(this).parent().children("ul.tree").toggle(200)}),jQuery("#menu-toggle").click(function(e){e.preventDefault(),jQuery("#wrapper").toggleClass("toggled"),jQuery("#wrapper").hasClass("toggled")?jQuery("#menu-toggle span").html("Show Sidebar"):jQuery("#menu-toggle span").html("Collapse Sidebar")}),rmgControllers.controller("reportsCtrl",["$scope","$routeParams","$http","$interval","uiGridConstants","uiGridGroupingConstants",function(c,r,o,p,u,t){c.reports={},c.reports.loading=!0,c.reports.showGrid=!1,c.reports.showForms=!1,c.reports.selFaire="",c.reports.selectedFields={},c.msg={},c.sortField="",c.sortChanged=function(e,r){var t=[];angular.forEach(r,function(e,r){void 0!==e&&void 0!==e.displayName&&t.push(e.displayName)}),c.sortField=t.join(", ")},"location"in r&&"true"===r.location&&(c.reports.location=!0),c.gridOptions={enableFiltering:!0,enableSorting:!0,enableGridMenu:!0,rowHeight:100,exporterMenuPdf:!0,exporterPdfMaxGridWidth:680,exporterPdfFooter:function(e,r){return{text:"Page "+e.toString()+" of "+r.toString(),style:"footerStyle"}},exporterPdfHeader:function(e,r){return"lookup"==c.reports.subRoute?{text:"Maker Lookup By "+c.sortField,alignment:"center",style:"headerStyle"}:"schedule"==c.reports.subRoute?{text:"Schedule By "+c.sortField,alignment:"center",style:"headerStyle"}:void 0},exporterPdfCustomFormatter:function(e){return e.styles.headerStyle={fontSize:14,bold:!0,margin:20,fillColor:"#f0f0f0"},e},exporterPdfDefaultStyle:{fontSize:9},exporterPdfTableHeaderStyle:{fontSize:10,bold:!0},exporterPdfTableStyle:{margin:[-20,10,-10,-20]},exporterPdfOrientation:"landscape",exporterPdfPageSize:"LETTER",exporterHeaderFilter:function(e){return"Name"===e?"Person Name":e},exporterCsvFilename:"export.csv",exporterCsvLinkElement:angular.element(document.querySelectorAll(".custom-csv-link-location")),exporterFieldCallback:function(e,r,t,a){if("editDropdownOptionsArray"in t.colDef){for(var o={},i=t.colDef.editDropdownOptionsArray,l=0;l<i.length;l++)o[i[l].id]=i[l].fkey;return a?void 0!==o[a]?o[a]:a:""}return a},onRegisterApi:function(e){c.gridApi=e,c.gridApi.core.on.sortChanged(c,c.sortChanged),c.sortChanged(c.gridApi.grid,[c.gridOptions.columnDefs[1]])}},c.reports.changeGrouping=function(e){c.gridApi.grouping.clearGrouping(),"item"==e?(c.gridApi.grouping.groupColumn("item"),c.gridApi.grouping.groupColumn("resource_id")):"faire"==e&&(c.gridApi.grouping.groupColumn("faire"),c.gridApi.grouping.groupColumn("area"),c.gridApi.grouping.groupColumn("subarea"),c.gridApi.grouping.groupColumn("location")),c.gridApi.grouping.aggregateColumn("qty",t.aggregation.SUM)},c.retGridData=function(){c.reports.loading=!0,c.reports.showGrid=!0;var d="";c.gridOptions.columnDefs=[],o({method:"post",url:"/resource-mgmt/ajax/reports.ajax.php",data:JSON.stringify({table:c.reports.tableName,type:l,faire:c.reports.selFaire,formSelect:c.reports.selForm,subRoute:c.reports.subRoute}),headers:{"Content-Type":"application/json"}}).then(function(t){var a,o,i,l,s,n=[];angular.forEach(t.data.columnDefs,function(e,r){"faire"==e.name&&""!=c.reports.selFaire&&(angular.forEach(e.filter.selectOptions,function(e,r){e.label==c.reports.selFaire&&(d=e.value)}),""!=d)&&(t.data.columnDefs[r].filter.term=d),"sort"in e&&(n.push(e.displayName),"direction"in e.sort&&("uiGridConstants.ASC"==e.sort.direction?e.sort.direction=u.ASC:"uiGridConstants.DESC"==e.sort.direction&&(e.sort.direction=u.DESC)),e.sortingAlgorithm=function(e,r,t,a,o){var i=c.gridApi.core.sortHandleNulls(e,r);return null!==i?i:""==e?0:""==r?-1:e===r?0:r<e?1:e<r?-1:0}),"filter"in e&&(e.filter.type=u.filter.SELECT),"sort"in e&&(e.sort.direction=u.ASC)}),c.sortField=n.join(", "),c.gridOptions.columnDefs=t.data.columnDefs,c.gridOptions.data=t.data.data,"forms"in t.data&&("formSelect"in r?c.reports.formSelect=r.formSelect.split(","):c.reports.formSelect=[],c.reports.forms=t.data.forms),"fields"in t.data&&(c.fieldSelect.data=t.data.fields,a=[],(a="fields"in r?r.fields.split(","):a).push("303","151"),c.fieldSelect.gridApi.selection.selectRow)&&angular.forEach(c.fieldSelect.data,function(e,r){-1!=a.indexOf(String(e.id))&&p(function(){c.fieldSelect.gridApi.selection.selectRow(c.fieldSelect.data[r])},0,1)}),"rmt"in t.data&&(c.reports.rmt=t.data.rmt,"resource"in r&&(o=r.resource.split(","),angular.forEach(c.reports.rmt.resource,function(e,r){-1!=o.indexOf(String(e.value))&&(c.reports.rmt.resource[r].checked=!0)})),"attribute"in r&&(i=r.attribute.split(","),angular.forEach(c.reports.rmt.attribute,function(e,r){-1!=i.indexOf(String(e.value))&&(c.reports.rmt.attribute[r].checked=!0)})),"attention"in r&&(l=r.attention.split(","),angular.forEach(c.reports.rmt.attention,function(e,r){-1!=l.indexOf(String(e.value))&&(c.reports.rmt.attention[r].checked=!0)})),"other"in r)&&(s=r.other.split(","),angular.forEach(c.reports.rmt.meta,function(e,r){-1!=s.indexOf(String(e.value))&&(c.reports.rmt.meta[r].checked=!0)}))}).finally(function(){c.reports.loading=!1,c.reports.showGrid=!0})};var e,a,i="wp_rmt_entry_resources",l="tableData";r&&(c.reports.subRoute=r.sub,a="","change"===(e=r.sub)?(i="wp_mf_lead_detail_changes",a="Entry Change Report"):"drill"===e?(i="wp_rmt_entry_resources",a="Resource Drill Down"):"schedule"===e?(i="wp_mf_location",a="Faire Schedule Report"):"lookup"===e?(i="wp_mf_location",a="Faire Lookup Report"):"tasksComp"===e?(i="wp_mf_entity_tasks",a="Tasks Completed"):"sponsorPay"===e?(i="sponsorOrder",l="paymentRpt",a="Sponsor Payments"):"exhibitPay"===e?(i="exhibitOrder",l="paymentRpt",a="Sponsor Payments"):"notes"===e?(i="notes",l="notesRpt",a="Faire Notes Report"):"tickets"===e&&(i="tickets",l="ticketsRpt",a="Faire Entry Passes Report"),jQuery("#pageTitle").html("Reports"),jQuery("#subTitle").html(a),c.reports.tableName=i,"faire"in r?(c.reports.selFaire=r.faire,c.retGridData()):c.reports.selFaire=""),c.filterExport=function(e,r,t,a){return"unknown"},c.highlightFilteredHeader=function(e,r,t,a){return t.filters[0].term?"header-filtered":""},c.checkSubroute=function(e){"tasksComp"===r.sub?c.retrieveData("forms"):c.retGridData()},c.retrieveData=function(r){var e,t,a;"faires"===r?(e=jQuery.param({type:r}),t="/resource-mgmt/ajax/ajax.php",a={"Content-Type":"application/x-www-form-urlencoded"}):"forms"===r&&(e=jQuery.param({type:r,faire:c.reports.selFaire}),t="/resource-mgmt/ajax/ajax.php",a={"Content-Type":"application/x-www-form-urlencoded"}),o({method:"post",url:t,data:e,headers:a}).then(function(e){"error"in e.data?alert(e.data.error):"faires"!==r&&"forms"!==r||(c.reports[r]=e.data[r],"faires"===r&&(c.reports.selFaire=c.reports.faires[0].ID,c.retGridData()))}).finally(function(){"faires"===r?(faires=c.reports.faires,angular.forEach(faires,function(e,r){e.faire===c.subRoute&&(c.reports.selFaire=r,c.retGridData())})):"forms"===r&&(c.reports.showForms=!0)})},c.export=function(e=0){c.gridApi.exporter.pdfExport("visible","visible")}}]).filter("griddropdown",function(){return function(e,r){var t,a,o={};if(r.col)for(var i=r.col.colDef.editDropdownOptionsArray,l=0;l<i.length;l++)o[i[l].id]=i[l].fkey;return e?t===o[e]?t:a===e.match(/(.+)( \(\d+\))/)&&t===o[a[1]]?t+a[2]:e:""}});
//# sourceMappingURL=footer-scripts.min.js.map